!function(e){function t(t){for(var n,r,i=t[0],s=t[1],u=t[2],l=0,d=[];l<i.length;l++)r=i[l],c[r]&&d.push(c[r][0]),c[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(p&&p(t);d.length;)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var s=a[r];0!==c[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={4:0},c={4:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{1:1,2:1,3:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1}[e]&&t.push(r[e]=new Promise(function(t,a){for(var n=({}[e]||e)+"."+{0:"31d6cfe0d16ae931b73c",1:"2e482f0ad0fcfeef930d",2:"bd4a8e791f83963f92dc",3:"d9f217f0907ab6bd2b12",6:"975ae2fd6739e9792e79",7:"1fd62b5506067c23644b",8:"7f9f683c798a7daafa50",9:"a063bfb0350c682c4fdc",10:"b540c57941ec8f76864c",11:"c8c1f455bb608dea04de",12:"0b18f51e3d11a3d3a732",13:"31d6cfe0d16ae931b73c"}[e]+".css",c=i.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=(p=o[s]).getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(u===n||u===c))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){var p;if((u=(p=l[s]).getAttribute("data-href"))===n||u===c)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.request=n,delete r[e],d.parentNode.removeChild(d),a(o)},d.href=c,document.getElementsByTagName("head")[0].appendChild(d)}).then(function(){r[e]=0}));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise(function(t,n){a=c[e]=[t,n]});t.push(a[2]=n);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+"."+{0:"8d44c6820656e641d191",1:"a728245fb9a7ee7de2af",2:"9761e061b1bc1ea9f041",3:"56c2d8c2ee18009f06af",6:"fba83ba250d8c8642acd",7:"02a4ad09acf11c5e909b",8:"ebbef995057a628b25ad",9:"8c2f694e512b76b3d1b3",10:"1b1c15acad6fbe08cb58",11:"b1a91c607376799c8fc4",12:"1d300d83302d5e20df55",13:"d569c9f1ca4336561121"}[e]+".js"}(e),o=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=c[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");o.type=n,o.request=r,a[1](o)}c[e]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:s})},12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./assets/",i.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=u;o.push([331,5]),a()}({14:function(e,t,a){"use strict";t.a={GET_TOKEN:"/player-war/player/token",POST_QUERYQUIZPAPERLIST:"/player-war/tiku/homework/queryQuizPaperList",POST_QUERYPAPERCONTENT:"/player-war/tiku/homework/queryPaperContent",POST_QUERYHOMEWORKRESULT:"/player-war/tiku/homework/queryHomeworkResult",GET_GETANALYSISANDSTUANSWER:"/player-war/tiku/homework/getAnalysisAndStuAnswer",POST_SUBMITHOMEWORK:"/player-war/tiku/homework/submitHomework",GET_SCORE_LABEL_LIST:"/player-war/comment/getScoreLabelList",GET_SCORE_RECORD:"/player-war/comment/getScoreRecord",GET_ATTACHMENT_LIST:"/player-war/attachment/getAttachmentList",ADD_CORE_RECORD:"/player-war/comment/addScoreRecord",FEED_BACK_TYPE_LIST:"/player-war/comment/getOptionList",FEED_BACK:"/player-war/comment/submitOption",SEND_STUDY_RECORD:"/player-war/studyRecord/insertStudyRecord",GET_STUDY_RECORD:"/player-war/studyRecord/getStudyRecordByUnitId",GET_PROMOTES_DETAIL:"/player-war/trade/getDetails",POST_PROMOTE_OEDER:"/player-war/trade/createOrder",GET_COUPONS_DETAIL:"/player-war/trade/getActivityById",JOIN_COUPON:"/player-war/trade/joinCoupon",CREATE_DEPOSIT:"/player-war/trade/createDeposit",GET_COUPON_ISJOIN:"/player-war/trade/query",CREATE_ORDER:"/player-war/trade/createOrder",EVALUTION_ATTACHMENT:"/player-war/comment/evaluateAttachment",ADD_ATTACHMENT_DOWNLOAD:"/player-war/attachment/addAttachmentDownLoad"}},15:function(e,t,a){"use strict";a.d(t,"h",function(){return c}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"g",function(){return s}),a.d(t,"e",function(){return u}),a.d(t,"f",function(){return l}),a.d(t,"a",function(){return p}),a.d(t,"c",function(){return d});var n=a(51),r=a.n(n);function c(e,t){var a,n,r=this;return function(){for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];var s=r,u=Date.now();n&&u-n<t?(clearTimeout(a),a=setTimeout(function(){e.apply(s,o),n=u},t)):(e.apply(s,o),n=u)}}function o(e,t,a){var n,r=this;return function(){for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];var s=r;if(n&&clearTimeout(n),a){var u=!n;n=setTimeout(function(){n=null},t),u&&e.apply(s,o)}else n=setTimeout(function(){e.apply(s,o)},t)}}function i(e,t){var a=e.className.split(/\s+/);a.push(t),e.className=a.join(" ")}function s(e,t){var a=e.className.split(/\s+/);e.className=a.filter(function(e){return e!==t}).join(" ")}function u(e){return new Promise(function(t){setTimeout(t,e)})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("?"),a={};t>-1&&e.split("?")[1].split("&").forEach(function(e){var t=e.split("="),n=r()(t,2),c=n[0],o=n[1];a[c]=decodeURIComponent(o)});return a}function p(e){return new RegExp("^(http|https)://","i").test(e)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise(function(t,a){if(window.clipboardData&&window.clipboardData.setData)t(window.clipboardData.setData("Text",e));else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{t(document.execCommand("copy"))}catch(e){a(e)}finally{t(document.body.removeChild(n))}}})}},155:function(e,t,a){"use strict";var n,r,c,o=a(0),i=a.n(o),s=a(2),u=a.n(s),l=a(21),p=a(30),d=a.n(p),m=a(31),_=a.n(m),f=a(32),E=a.n(f),T=a(33),b=a.n(T),y=a(34),v=a.n(y),O=a(6),S=a(219),h=a(304),x=a.n(h),A=Object(l.c)(null,function(e){return{handleSwitchWindow:function(){e({type:O.a.SWITCH_WINDOW})}}})((c=r=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=E()(this,(e=b()(t)).call.apply(e,[this].concat(r)))).handleBtnClick=function(){a.props.handleSwitchWindow()},a}return v()(t,e),_()(t,[{key:"render",value:function(){var e=this.handleBtnClick;return i.a.createElement(S.a,{title:"切换窗口",icon:x.a,onClick:e})}}]),t}(o.Component),r.propTypes={handleSwitchWindow:u.a.func.isRequired},n=c))||n,g=Object(o.lazy)(function(){return Promise.all([a.e(0),a.e(3),a.e(7),a.e(9)]).then(a.bind(null,826))}),P=Object(o.lazy)(function(){return Promise.all([a.e(0),a.e(3),a.e(8)]).then(a.bind(null,825))}),D=Object(o.lazy)(function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,823))}),k=Object(o.lazy)(function(){return Promise.all([a.e(6),a.e(11)]).then(a.bind(null,827))}),I=a(305),j=a.n(I);function N(e){var t=e.videoLoaded;return i.a.createElement("ul",{className:j.a["button-panel"]},i.a.createElement(o.Suspense,{fallback:null},t&&i.a.createElement(D,null),t&&i.a.createElement(P,null),t&&i.a.createElement(g,null),i.a.createElement(A,null),t&&i.a.createElement(k,null)))}N.propTypes={videoLoaded:u.a.bool},N.defaultProps={videoLoaded:!1};t.a=Object(l.c)(function(e){var t=e["live-page"].liveRoom,a=e["vod-page"].replayRoom,n=e.common.teachUnitId;return{videoLoaded:Boolean((t||a)&&n)}})(N)},156:function(e,t){e.exports=SLIVE},161:function(e,t,a){e.exports={"button-item":"index__button-item___E74ix","button-item__icon":"index__button-item__icon___y8Zvn","button-item__text":"index__button-item__text___3_Nax"}},17:function(e,t,a){"use strict";t.a={UPDATE_STATE:"vod-page/update-state",INIT:"vod-page/init",DISPOSE:"vod-page/DISPOSE",SWITCH_WINDOW:"vod-page/SWITCH_WINDOW",PLAY_BACK_RATE:{1:"replay_click_onespeed",1.25:"replay_click_one_point_two_speed",1.5:"replay_click_one_point_five_speed",2:"replay_click_two_speed"},SEND_STUDY_RECORD:"vod-page/send_study_record",UPDATE_DATA:"vod-page/UPDATE_DATA"}},19:function(e,t,a){"use strict";var n=a(294),r=a.n(n),c=a(209),o=a.n(c),i={timeout:3e4,withCredentials:!0,paramsSerializer:function(e){return o.a.stringify(e,{arrayFormat:"brackets"})}},s=r.a.create(i);s.interceptors.request.use(function(e){return"post"!==e.method.toLowerCase()||e.headers["Content-Type"]||(e.data=o.a.stringify(e.data)),e}),s.interceptors.response.use(function(e){var t=e.data,a=(t=void 0===t?{}:t).rs,n=t.error,r=t.rsdesp,c=t.resultMessage,o=void 0===c?{}:c,i=t.errorMessage,s=void 0===i?"":i,u=t.errorCode;if(void 0!==a){if(n)return 0===a?e.data:Promise.reject(n);if(1===a)return o;if(0===a)return 403==+u?Promise.reject(new Error("被踢出人员")):Promise.reject(s||r)}return e},function(e){var t=e.message,a=e.response;if(a){if(a.status>=500)return a.data&&a.data.message?Promise.reject(a.data.message):Promise.reject(e);if(401===a.status)return a.data&&a.data.code,Promise.reject(e);var n=a.data,r=(n=void 0===n?{}:n).message;return Promise.reject(r||t)}return Promise.reject(t)}),t.a=s},205:function(e,t,a){"use strict";a.r(t);var n=a(485),r=n.keys().filter(function(e){return"./index.js"!==e}).reduce(function(e,t){return e[t.match(/([^\/]+)\.js$/)[1]]=n(t).default,e},{});t.default=r},206:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return u});var n=a(3),r=a.n(n),c=a(1),o=r.a.mark(u),i=a(510),s=i.keys().filter(function(e){return"./index.js"!==e});function u(){var e,t,a,n,u,l=arguments;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(e=l.length,t=new Array(e),a=0;a<e;a++)t[a]=l[a];n=0;case 2:if(!(n<s.length)){o.next=13;break}o.t0=r.a.keys(i(s[n]).default);case 4:if((o.t1=o.t0()).done){o.next=10;break}return u=o.t1.value,o.next=8,c.c.apply(void 0,[i(s[n]).default[u]].concat(t));case 8:o.next=4;break;case 10:n+=1,o.next=2;break;case 13:case"end":return o.stop()}},o)}},210:function(e,t,a){"use strict";a.r(t);var n=a(272),r=a.n(n);a.d(t,"SmileOutline",function(){return r.a});var c=a(273),o=a.n(c);a.d(t,"MehOutline",function(){return o.a});var i=a(274),s=a.n(i);a.d(t,"ExclamationCircleOutline",function(){return s.a});var u=a(275),l=a.n(u);a.d(t,"StarFill",function(){return l.a});var p=a(276),d=a.n(p);a.d(t,"CloseCircleFill",function(){return d.a});var m=a(277),_=a.n(m);a.d(t,"CheckCircleFill",function(){return _.a});var f=a(278),E=a.n(f);a.d(t,"InfoCircleFill",function(){return E.a});var T=a(279),b=a.n(T);a.d(t,"CloseOutline",function(){return b.a});var y=a(280),v=a.n(y);a.d(t,"LoadingOutline",function(){return v.a})},212:function(e,t,a){e.exports={wrap:"index__wrap___1tvKR",box:"index__box___3_tsS"}},219:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(2),o=a.n(c),i=a(161),s=a.n(i);function u(e){var t=e.title,a=e.icon,n=e.onClick;return r.a.createElement("li",{className:s.a["button-item"],onClick:n},r.a.createElement("div",{className:s.a["button-item__icon"]},r.a.createElement("img",{src:a,alt:""})),r.a.createElement("p",{className:s.a["button-item__text"]},t))}u.propTypes={title:o.a.string,icon:o.a.string.isRequired,onClick:o.a.func.isRequired},u.defaultProps={title:""},t.a=u},24:function(e,t,a){"use strict";t.a={UPDATE_STATE:"live-page/update-state",INIT:"live-page/init",DISPOSE:"live-page/DISPOSE",SWITCH_WINDOW:"live-page/SWITCH_WINDOW",LIVE_LOGGED:"live-page/LIVE_LOGGED",UPDATE_DATA:"live-page/UPDATE_DATA"}},27:function(e,t,a){"use strict";t.a={UPDATE_STATE:"evaluate/UPDATE_STATE",GET_EVALUATE_HISTORY:"evaluate/GET_EVALUATE_HISTORY",CHANGE_RATE:"evaluate/CHANGE_RATE",STAR_HOVER:"evaluate/STAR_HOVER",SELECT_LABEL:"evaluate/SELECT_LABEL",CHANGE_INPUT_VALUE:"evaluate/CHANGE_INPUT_VALUE",SUBMIT:"evaluate/SUBMIT",BTN_CLICKED:"evaluate/BTN_CLICKED",AUTO_SHOW_MODAL:"evaluate/AUTO_SHOW_MODAL"}},298:function(e,t,a){e.exports=a.p+"e406a90cb94ea239a1d1e42c14851afd.swf"},299:function(e,t,a){e.exports={main:"Main__main___3ptDi"}},304:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAAAXNSR0IArs4c6QAAAlNJREFUOBF9Uk1IVFEUPue9ZyZINLkp29RCnGVgMFMRBE5aLVoEWWAtGnTERBcFNUNEQeRMAzEwzRiFPxC1KKFFO7NFm5iBFoKb3pAQimkbmxam4tz3TufevNNVybO553zfd8/PvQdgB3NzkV73Set8KRvp3kEGaJLu0Jlm9CsXfMLDSHCMWYeIgkqDMIFgRYP9kwvmHemrJCzEUr7tFpH/AAhqFIHA8OYigFh2bDjXdP1D0UxkycDNnX5Mvp/SCSS2LcFfMCA8PC9d06wvQ20t3M6ACXIszFj7iPDSCTgpGaei4Y5kNJSWPrrZyAsCuioDZQizjmPdFRWwAamTW4owvmzZdldz3/vXUjN2/9TuH3NrC8zttWznuMNTH+ExqubYeLmpd1LN/DXXPi3Au1i3y84e6plY1KLF2bU7PHBAxj55fdxJ6wrnqNOC4P59tdgxvq7jreezWKxmSUz/5C7qJccjzsuHXaoKEZahHDD6qjJVJ9BYlv+mEiiQsEGO85HHuSIB3oMM9jyv6BuZ2MkDq0IMcLU3iZHClMRn5r63aH7jnHFsG/OeR528Er9q6w8OakG6K3xpVVSGVVWCo8lo+JWFxFLeJdOQptSy8XqngfAzb+N4tv/snt8r5Tz5pLrbpEcQvD+OxhDQA5tCKokG5Zm8FhrkR0mY2P98tDCTGCneUBtrivjf3yGvt4lJn6v9e3BEwQni8eHCzQ1uqxzgUfREo0dilJl2JSJ0OYsghAIX+GaR9fb26KeSvrltHE3Ik1e72ye4x+0+jI8Vn5qc6f8BqSvXMH7ONiEAAAAASUVORK5CYII="},305:function(e,t,a){e.exports={"button-panel":"index__button-panel___3c7W6"}},306:function(e,t,a){e.exports=a.p+"c0510b480cc13adaae2748b23366472d.png"},307:function(e,t,a){e.exports=a.p+"22e0fabba52aaa012c78ca2b0a6957be.png"},331:function(e,t,a){e.exports=a(601)},36:function(e,t,a){"use strict";t.a={UPDATE_STATE:"chat/update-state",UPDATE_CHAT_MESSAGE:"chat/update-chat-message",LOADING_REPLY:"chat/LOADING_REPLY",UPDATE_RADIO_LIST:"chat/UPDATE_RADIO_LIST",START_COUNTDOWN:"chat/START_COUNTDOWN"}},41:function(e,t,a){e.exports={"promotes-wrap":"index__promotes-wrap___38XL0",title:"index__title___2iNBa","promotes-list":"index__promotes-list___37Md_","promotes-box":"index__promotes-box___3W-Hq","img-box":"index__img-box___7cKHn",name:"index__name___1euQt","price-wrap":"index__price-wrap___2adZF",price:"index__price___j1L6m","coupon-wrap":"index__coupon-wrap___19WkF",deduction:"index__deduction___1L8pU","purchase-btn":"index__purchase-btn___1qNo6","no-data":"index__no-data___vxG-4","coupon-list":"index__coupon-list___IvVYk","coupon-box":"index__coupon-box___1LON5","coupon-loading":"index__coupon-loading___3DqJR",disabled:"index__disabled___xeBWU","coupon-price":"index__coupon-price___24Pub","coupon-content":"index__coupon-content___1tHoI","coupon-name":"index__coupon-name___2TwQC","coupon-time":"index__coupon-time___2WG6A","coupon-active":"index__coupon-active___2rod-","coupon-unusable":"index__coupon-unusable___2aOCE","coupon-joined":"index__coupon-joined___8w524","fullpage-promotes-wrap":"index__fullpage-promotes-wrap___289cQ",appear:"index__appear___2sAVL",close:"index__close___2I96O",main:"index__main___3LgJD","price-btn":"index__price-btn___10yl8","desposit-wrap":"index__desposit-wrap___2nAe5",label:"index__label___30_j0","desposit-price":"index__desposit-price___3NEIz",detail:"index__detail___2oeWE","deposit-modal":"index__deposit-modal___2ZF2x","url-title":"index__url-title___2okPg","deposit-url":"index__deposit-url___eUhy0","ma-img":"index__ma-img___1m_iZ","img-tip":"index__img-tip___2_mqe",couponModal:"index__couponModal___2mhoG",tip:"index__tip___1f74O",fullPageLoading:"index__fullPageLoading___1XMXW"}},47:function(e,t,a){e.exports={main:"VodPage__main___1wUdm",left:"VodPage__left___1Kp0k",right:"VodPage__right___qBMsa",transition:"VodPage__transition___OzoyT",sunl_board_placeholder:"VodPage__sunl_board_placeholder___2rF3p",sunl_player_placeholder:"VodPage__sunl_player_placeholder___3iUd8",main_player:"VodPage__main_player___3HG0w",small_player:"VodPage__small_player___1nVwq",chat:"VodPage__chat___1hLx2",inactive:"VodPage__inactive___1L886",btns:"VodPage__btns___v-q1J",questions:"VodPage__questions___1STRZ"}},485:function(e,t,a){var n={"./chat.js":486,"./common.js":487,"./course.js":488,"./evaluate.js":489,"./feedback.js":504,"./index.js":205,"./live-page.js":505,"./promotes-panel.js":506,"./question.js":507,"./quiz.js":508,"./vod-page.js":509};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=485},486:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(11),r=a.n(n),c=a(10),o=a.n(c),i=a(70),s=a(36),u={iUserCount:1,chatData:[],announceData:null,forbiddenStatus:0,forbiddenStatusSingle:0,connectStatus:0,userIdentity:1,userToken:"",portrait:"",countdownNumber:0};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},487:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(11),c=a.n(r),o=a(10),i=a.n(o),s=a(70),u=a(6),l={ctk:"",loading:!0,imToken:"",liveToken:"",liveRoomId:"",invitation:"",encryptStr:"",channelCode:"",teachUnitId:0,isLive:!0,isKicked:!1,userId:0,partnerId:null,roomId:null,userName:null,userRole:null,ts:null,userAvatar:null,sign:null};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.KICK_OUT,function(e){return i()({},e,{isKicked:!0})}),n),l)},488:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(11),r=a.n(n),c=a(10),o=a.n(c),i=a(70),s=a(52),u={courseList:[],popVisible:!1,popTip:"",visible:!1};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},489:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return d});var n,r=a(11),c=a.n(r),o=a(86),i=a.n(o),s=a(10),u=a.n(s),l=a(70),p=a(27),d={star:0,unitDesignScore:0,indexArr:[],inputValue:"",renderType:"",showTip:!1,rateDisabled:!1,labelList:[],scoreRecord:{},prompt:"无",loading:!1,starStyleValue:0,visible:!1};t.default=Object(l.a)((n={},c()(n,p.a.UPDATE_STATE,function(e,t){var a=t.payload;return u()({},e,a)}),c()(n,p.a.STAR_HOVER,function(e,t){var a=t.payload.value;return a===e.star||void 0===a?e:u()({},e,{starStyleValue:a})}),c()(n,p.a.SELECT_LABEL,function(e,t){var a=t.payload.item,n=e.indexArr,r=e.rateDisabled,c=e.scoreRecord;return!i()(c)||r?u()({},e,{showTip:!1}):(n.find(function(e){return e.id===a.id})?n.splice(n.findIndex(function(e){return e.id===a.id}),1):n.push(a),u()({},e,{indexArr:n,showTip:!1}))}),c()(n,p.a.CHANGE_INPUT_VALUE,function(e,t){var a=t.payload.value;return a.length>100?u()({},e,{prompt:"输入文字已到最大长度",showTip:!0}):u()({},e,{inputValue:a,showTip:!1})}),n),d)},504:function(e,t,a){"use strict";a.r(t);var n,r=a(11),c=a.n(r),o=a(10),i=a.n(o),s=a(70),u=a(53),l={feedbackVisible:!1,type:[],successVisible:!1,loading:!1};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.RESET,function(e){return i()({},e,l)}),n),{feedbackVisible:!1,typeList:[],type:[],successVisible:!1,loading:!1})},505:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(11),c=a.n(r),o=a(10),i=a.n(o),s=a(70),u=a(24),l={isDisPlaySmall:!0,isPlayerSmall:!0,paperId:0,isFullScreen:!1,debug:!1,sketchpad:null,camera:null,chat:null,liveRoom:null,endTime:0,baginTime:0};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.LIVE_LOGGED,function(e,t){var a=t.payload;return i()({},e,a)}),n),l)},506:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(11),c=a.n(r),o=a(10),i=a.n(o),s=a(70),u=a(8),l={vodTotalPromotes:[],promoteList:[],couponList:[],couponFlag:!1,isShowPromote:!0,isShowCoupon:!0,isFullScreen:!1,promoteTimestamp:1,loading:!1};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.LIVE_LOGGED,function(e,t){var a=t.payload;return i()({},e,a)}),n),l)},507:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(11),r=a.n(n),c=a(10),o=a.n(c),i=a(70),s=a(69),u={textNum:0,qaData:[]};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},508:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return l});var n,r=a(11),c=a.n(r),o=a(10),i=a.n(o),s=a(70),u=a(7),l={loading:!1,quizPapers:[],curIndex:0,checkModal:!1,checkLoading:!1,scoreRecord:{totalScore:0,studentAnswerInfo:[]},scoreLoading:!1,resultMap:{},questionIds:[],answerValueMap:{},answerMap:{},type:"list",visible:!1,popTip:u.a.TIPS.unstart,popVisible:!1,currentPaperId:0,_time:0,uncompletedPapers:[],quizChannel:1};t.default=Object(s.a)((n={},c()(n,u.a.UPDATE_STATE,function(e,t){var a=t.payload;return i()({},e,a)}),c()(n,u.a.UPDATE_PAPER_LIST,function(e,t){var a=t.payload.quizPapers,n=a.reduce(function(e,t){var a=t.quizzesPaperStatusCode,n=t.paperId;return"UNCOMPLETE"===a&&e.push(n),e},[]);return i()({},e,{quizPapers:a,uncompletedPapers:n})}),c()(n,u.a.SET_CURRENT_QUESTION,function(e,t){var a=t.payload.questionId,n=e.questionIds.indexOf(a),r=n>-1?n:0;return i()({},e,{curIndex:r,type:"content",status:!0})}),n),l)},509:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",function(){return u});var n=a(11),r=a.n(n),c=a(10),o=a.n(c),i=a(70),s=a(17),u={paperId:0,debug:!1,sketchpad:null,camera:null,canPlay:!1,isFullScreen:!1,isDisPlaySmall:!0,isPlayerSmall:!0,replayRoom:null,chat:null,studyProgress:0,hasSetHistory:!1,duration:0,useServerRecord:!1};t.default=Object(i.a)(r()({},s.a.UPDATE_STATE,function(e,t){var a=t.payload;return o()({},e,a)}),u)},510:function(e,t,a){var n={"./chat.js":511,"./common.js":602,"./course.js":569,"./evaluate.js":570,"./feedback.js":571,"./index.js":206,"./live-page.js":572,"./promotes-panel.js":573,"./question.js":574,"./quiz.js":575,"./vod-page.js":577};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=510},511:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(1),o=a(87),i=a.n(o),s=a(36),u=a(6),l=a(15),p=r.a.mark(f),d=r.a.mark(E),m=r.a.mark(T),_=r.a.mark(b);function f(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(c.f)([s.a.UPDATE_CHAT_MESSAGE,s.a.LOADING_REPLY,s.a.UPDATE_RADIO_LIST]);case 3:return e=n.sent,t=e.payload,a=e.meta,n.next=8,Object(c.d)({type:s.a.UPDATE_STATE,payload:t});case 8:i()(a)&&a(),n.next=0;break;case 11:case"end":return n.stop()}},p)}function E(){var e,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(c.e)(function(e){return e.chat.chatData.length});case 3:return e=a.sent,a.next=6,Object(c.a)(l.e,6e4);case 6:return a.next=8,Object(c.e)(function(e){return e.chat.chatData.length});case 8:return t=a.sent,a.next=11,Object(c.d)({type:u.a.SEND_SLOG,payload:{eid:"im_count_per_minute",opts:{count:t-e}}});case 11:a.next=0;break;case 13:case"end":return a.stop()}},d)}function T(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=2;case 1:if(!(e>=0)){t.next=9;break}return t.next=4,Object(c.d)({type:s.a.UPDATE_STATE,payload:{countdownNumber:e}});case 4:return t.next=6,Object(c.a)(l.e,1e3);case 6:e-=1,t.next=1;break;case 9:case"end":return t.stop()}},m)}function b(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(c.f)(s.a.START_COUNTDOWN);case 3:if(!e){t.next=6;break}return t.next=6,Object(c.b)(e);case 6:return t.next=8,Object(c.c)(T);case 8:e=t.sent,t.next=0;break;case 11:case"end":return t.stop()}},_)}t.default={updateMessages:f,slogImCount:E,countdownSaga:b}},52:function(e,t,a){"use strict";t.a={UPDATE_STATE:"course/UPDATE_STATE",FETCH_LIST:"course/FETCH_LIST",BTN_CLICKED:"course/BTN_CLICKED",EVALUATE_ATTACHMENT:"course/EVALUATE_ATTACHMENT",ADD_DOWMLOAD_COUNT:"course/ADD_DOWMLOAD_COUNT"}},53:function(e,t,a){"use strict";t.a={UPDATE_STATE:"feedback/update",RESET:"feedback/reset",GET_TYPELIST:"feedback/get_typelist",SUBMIT:"feedback/submit",BTN_CLICKED:"feedback/BTN_CLICKED"}},569:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=(a(72),a(12)),o=a(162),i=a.n(o),s=a(1),u=a(15),l=a(52),p=a(7),d=a(27),m=a(19),_=a(14),f=r.a.mark(v),E=r.a.mark(O),T=r.a.mark(S),b=r.a.mark(h),y=r.a.mark(x);function v(){var e,t,a,n;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(s.f)(l.a.FETCH_LIST);case 3:return r.next=5,Object(s.e)(function(e){return e});case 5:if(e=r.sent,t=e.common,a=t.teachUnitId,!t.isKicked){r.next=11;break}return r.abrupt("continue",0);case 11:return r.prev=11,r.next=14,Object(s.a)(m.a.get,_.a.GET_ATTACHMENT_LIST,{params:{teachUnitId:a}});case 14:if(n=r.sent,!i()(n)){r.next=20;break}return r.next=18,Object(s.d)({type:l.a.UPDATE_STATE,payload:{courseList:n}});case 18:r.next=21;break;case 20:throw new Error("获取课件列表失败");case 21:r.next=27;break;case 23:return r.prev=23,r.t0=r.catch(11),r.next=27,Object(s.a)(c.a.error,"获取课件列表失败");case 27:r.next=0;break;case 29:case"end":return r.stop()}},f,null,[[11,23]])}function O(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(s.f)(l.a.BTN_CLICKED);case 3:return n.next=5,Object(s.e)(function(e){return e});case 5:if(e=n.sent,t=e.course.courseList,a=e.common.isKicked,!t.length||a){n.next=13;break}return n.next=11,Object(s.d)({type:l.a.UPDATE_STATE,payload:{visible:!0}});case 11:n.next=19;break;case 13:return n.next=15,Object(s.d)({type:l.a.UPDATE_STATE,payload:{popTip:"没有课件",popVisible:!0}});case 15:return n.next=17,Object(s.a)(u.e,3e3);case 17:return n.next=19,Object(s.d)({type:l.a.UPDATE_STATE,payload:{popVisible:!1}});case 19:n.next=0;break;case 21:case"end":return n.stop()}},E)}function S(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(s.f)([p.a.RECEIVE_QUIZ,d.a.AUTO_SHOW_MODAL]);case 3:return e.next=5,Object(s.d)({type:l.a.UPDATE_STATE,payload:{visible:!1}});case 5:e.next=0;break;case 7:case"end":return e.stop()}},T)}function h(){var e,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(s.f)(l.a.EVALUATE_ATTACHMENT);case 3:return e=a.sent,t=e.payload.params,a.prev=5,a.next=8,Object(s.a)(m.a.get,_.a.EVALUTION_ATTACHMENT,{params:t});case 8:return a.next=10,Object(s.d)({type:l.a.FETCH_LIST});case 10:return a.next=12,Object(s.a)(c.a.success,"LIKE"===t.opType?"已点赞":"已点踩");case 12:a.next=18;break;case 14:return a.prev=14,a.t0=a.catch(5),a.next=18,Object(s.a)(c.a.error,"课件评价失败");case 18:a.next=0;break;case 20:case"end":return a.stop()}},b,null,[[5,14]])}function x(){var e,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(s.f)(l.a.ADD_DOWMLOAD_COUNT);case 3:return e=a.sent,t=e.payload.params,a.prev=5,a.next=8,Object(s.a)(m.a.get,_.a.ADD_ATTACHMENT_DOWNLOAD,{params:t});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(5),a.next=14,Object(s.a)(c.a.error,"下载量统计失败");case 14:a.next=0;break;case 16:case"end":return a.stop()}},y,null,[[5,10]])}t.default={fetchList:v,btnClicked:O,receiveQuiz:S,handleEvaluateAttachment:h,handleAttachmentDownload:x}},570:function(e,t,a){"use strict";a.r(t);var n=a(86),r=a.n(n),c=a(3),o=a.n(c),i=(a(72),a(12)),s=a(1),u=a(27),l=a(19),p=a(15),d=a(14),m=a(6),_=a(7),f=a(24),E=o.a.mark(S),T=o.a.mark(h),b=o.a.mark(x),y=o.a.mark(A),v=o.a.mark(g),O=o.a.mark(P);function S(){var e,t,a,n;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(s.f)(u.a.GET_EVALUATE_HISTORY);case 3:return r.next=5,Object(s.e)(function(e){return e});case 5:if(e=r.sent,t=e.common,a=t.teachUnitId,!t.isKicked){r.next=11;break}return r.abrupt("continue",0);case 11:return r.next=13,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!0}});case 13:return r.prev=13,r.next=16,Object(s.a)(l.a.get,d.a.GET_SCORE_RECORD,{params:{teachUnitId:a}});case 16:return n=r.sent,r.next=19,Object(s.d)({type:u.a.UPDATE_STATE,payload:{scoreRecord:n.score?n:{},starStyleValue:n.score||0,unitDesignScore:n.unitDesignScore||0}});case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(13),i.a.error("获取评价记录失败");case 24:return r.next=26,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!1}});case 26:r.next=0;break;case 28:case"end":return r.stop()}},E,null,[[13,21]])}function h(){var e,t,a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(s.f)(u.a.CHANGE_RATE);case 3:return e=n.sent,t=e.payload.value,n.prev=5,n.next=8,Object(s.a)(l.a.get,d.a.GET_SCORE_LABEL_LIST,{params:{score:t}});case 8:return a=n.sent,n.next=11,Object(s.d)({type:u.a.UPDATE_STATE,payload:{labelList:a||[],star:t,indexArr:[],renderType:"form",showTip:!1,starStyleValue:t}});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(5),n.next=17,Object(s.a)(i.a.error,"评分失败");case 17:n.next=0;break;case 19:case"end":return n.stop()}},T,null,[[5,13]])}function x(){var e,t,a,n,r,c,p,_;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(s.f)(u.a.SUBMIT);case 3:return o.next=5,Object(s.e)(function(e){return e});case 5:if(e=o.sent,t=e.common.teachUnitId,a=e.evaluate,n=a.inputValue,r=a.indexArr,c=a.star,p=a.unitDesignScore,n.trim().length||r.length){o.next=17;break}return o.next=15,Object(s.d)({type:u.a.UPDATE_STATE,payload:{showTip:!0,prompt:"请选择标签或输入其它评价意见"}});case 15:o.next=44;break;case 17:if(p){o.next=22;break}return o.next=20,Object(s.d)({type:u.a.UPDATE_STATE,payload:{showTip:!0,prompt:"请选择课程设计满意度"}});case 20:o.next=44;break;case 22:return o.next=24,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!0}});case 24:return _=JSON.stringify(r.map(function(e){return e.id})),o.prev=25,o.next=28,Object(s.a)(l.a.get,d.a.ADD_CORE_RECORD,{params:{teachUnitId:t,labels:_,score:c,unitDesignScore:p,feedback:n.trim(),scoreTypeCode:"PC"}});case 28:return o.next=30,Object(s.d)({type:u.a.UPDATE_STATE,payload:{renderType:"submit",rateDisabled:!0,labelList:r,loading:!1}});case 30:return o.next=32,Object(s.a)(i.a.success,"评价提交成功");case 32:return o.next=34,Object(s.d)({type:m.a.SEND_SLOG,payload:{eid:"submit_rate_success"}});case 34:o.next=42;break;case 36:return o.prev=36,o.t0=o.catch(25),o.next=40,Object(s.a)(i.a.error,"评价提交失败");case 40:return o.next=42,Object(s.d)({type:m.a.SEND_SLOG,payload:{eid:"submit_rate_failure",opts:{reason:"".concat(o.t0)}}});case 42:return o.next=44,Object(s.d)({type:u.a.UPDATE_STATE,payload:{loading:!1}});case 44:o.next=0;break;case 46:case"end":return o.stop()}},b,null,[[25,36]])}function A(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(s.f)(_.a.RECEIVE_QUIZ);case 3:return e.next=5,Object(s.d)({type:u.a.UPDATE_STATE,payload:{visible:!1,labelList:[],renderType:""}});case 5:e.next=0;break;case 7:case"end":return e.stop()}},y)}function g(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(s.f)(u.a.BTN_CLICKED);case 3:return t.next=5,Object(s.e)(function(e){return e});case 5:if(e=t.sent,!e.common.isKicked){t.next=11;break}return t.next=10,Object(s.a)(i.a.info,"直播尚未开始");case 10:return t.abrupt("continue",0);case 11:return t.next=13,Object(s.d)({type:u.a.UPDATE_STATE,payload:{visible:!0}});case 13:t.next=0;break;case 15:case"end":return t.stop()}},v)}function P(){var e,t,a,n,c,i,l,d,m,_,E,T,b,y,v,S,h,x,A;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(s.f)(f.a.LIVE_LOGGED);case 2:if(e=o.sent,t=e.payload,a=t.endTime,n=t.baginTime,c=Date.now()-1e3*n,i=1e3*a-Date.now(),!(c/i>5)){o.next=11;break}return o.abrupt("return");case 11:return o.next=14,Object(s.a)(p.e,2e4);case 14:return o.next=16,Object(s.e)(function(e){return e});case 16:if(l=o.sent,d=l["live-page"],m=d.endTime,_=d.baginTime,E=l.quiz.visible,T=l.evaluate,b=T.scoreRecord,y=T.rateDisabled,v=l.common,S=v.isLive,h=v.isKicked,r()(b)&&!y&&S&&!h){o.next=29;break}return o.abrupt("break",42);case 29:if(x=Date.now()-1e3*_,A=1e3*m-Date.now(),!(x/A>5)){o.next=40;break}if(!E){o.next=35;break}return o.abrupt("break",42);case 35:return o.next=37,Object(s.d)({type:u.a.AUTO_SHOW_MODAL});case 37:return o.next=39,Object(s.d)({type:u.a.UPDATE_STATE,payload:{visible:!0}});case 39:return o.abrupt("break",42);case 40:o.next=11;break;case 42:case"end":return o.stop()}},O)}t.default={getEvaluateHistory:S,changeRate:h,submit:x,receiveQuiz:A,btnClicked:g,autoShowModal:P}},571:function(e,t,a){"use strict";a.r(t);a(72);var n=a(12),r=a(3),c=a.n(r),o=a(1),i=a(53),s=a(7),u=a(27),l=a(19),p=a(14),d=c.a.mark(b),m=c.a.mark(y),_=c.a.mark(v),f=c.a.mark(O),E=c.a.mark(S),T=c.a.mark(h);function b(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(o.f)([s.a.RECEIVE_QUIZ,u.a.AUTO_SHOW_MODAL]);case 3:return e.next=5,Object(o.d)({type:i.a.RESET});case 5:e.next=0;break;case 7:case"end":return e.stop()}},d)}function y(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.a)(l.a.get,p.a.FEED_BACK_TYPE_LIST);case 3:return e=t.sent,t.next=6,Object(o.d)({type:i.a.UPDATE_STATE,payload:{typeList:e}});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n.a.error("拉取反馈失败：".concat(t.t0));case 11:case"end":return t.stop()}},m,null,[[0,8]])}function v(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(o.f)(i.a.GET_TYPELIST);case 3:return t.next=5,Object(o.e)(function(e){return e});case 5:if(e=t.sent,!e.common.isKicked){t.next=9;break}return t.abrupt("continue",0);case 9:return t.next=11,Object(o.a)(y);case 11:t.next=0;break;case 13:case"end":return t.stop()}},_)}function O(){var e,t,a,r,s,u,d;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(o.e)(function(e){return e});case 3:return e=c.sent,t=e.common,a=t.ctk,r=t.isLive,s=t.userId,u=t.teachUnitId,d=e.feedback.type,c.next=12,Object(o.a)(l.a.post,p.a.FEED_BACK,{optionIds:d.toString(),teachUnitId:u,userId:s,token:a,isLive:Number(r),userAgent:navigator.userAgent});case 12:return c.next=14,Object(o.d)({type:i.a.UPDATE_STATE,payload:{feedbackVisible:!1,successVisible:!0,type:[]}});case 14:c.next=19;break;case 16:c.prev=16,c.t0=c.catch(0),n.a.error("反馈失败：".concat(c.t0||"请重试..."));case 19:case"end":return c.stop()}},f,null,[[0,16]])}function S(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(o.f)(i.a.SUBMIT);case 3:return e.next=5,Object(o.d)({type:i.a.UPDATE_STATE,payload:{loading:!0}});case 5:return e.next=7,Object(o.a)(O);case 7:return e.next=9,Object(o.d)({type:i.a.UPDATE_STATE,payload:{loading:!1}});case 9:e.next=0;break;case 11:case"end":return e.stop()}},E)}function h(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(o.f)(i.a.BTN_CLICKED);case 3:return t.next=5,Object(o.e)(function(e){return e});case 5:if(e=t.sent,!e.common.isKicked){t.next=11;break}return t.next=10,Object(o.a)(n.a.info,"直播尚未开始");case 10:return t.abrupt("continue",0);case 11:return t.next=13,Object(o.d)({type:i.a.UPDATE_STATE,payload:{feedbackVisible:!0}});case 13:t.next=0;break;case 15:case"end":return t.stop()}},T)}t.default={receiveQuizSaga:b,getTypeListSaga:v,submitSaga:S,btnClicked:h}},572:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),c=a(3),o=a.n(c),i=(a(72),a(12)),s=a(1),u=a(86),l=a.n(u),p=a(156),d=a(24),m=a(36),_=a(6),f=a(8),E=a(7),T=a(298),b=a.n(T),y=a(15),v=o.a.mark(x),O=o.a.mark(A),S=o.a.mark(g),h=o.a.mark(P);function x(e){var t,a,n,r,c,u,T,O,S,h,x,A,g,P,D,k,I,j,N;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(s.f)(d.a.INIT);case 3:return t=o.sent,a=t.payload,n=a.boardRef,r=a.playerRef,o.next=9,Object(s.e)(function(e){return e});case 9:if(c=o.sent,u=c.common,T=u.ctk,O=u.debug,S=u.token,h=u.partnerId,x=u.roomId,A=u.userId,g=u.userName,P=u.userRole,D=u.ts,k=u.userAvatar,I=u.sign,!S&&!h){o.next=39;break}return j={sketchpad:{el:n,ready:function(t){e.dispatch({type:d.a.UPDATE_STATE,payload:{sketchpad:t}})}},camera:{swfPath:b.a,el:r,onFullScreen:function(){e.dispatch({type:d.a.UPDATE_STATE,payload:{isFullScreen:!0}}),e.dispatch({type:f.a.UPDATE_STATE,payload:{isFullScreen:!0}});var t=document.getElementsByTagName("body")[0],a=document.getElementById("app"),n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;return n&&n.call(t),Object(y.b)(a,"fullscreen"),e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"live_click_fullscreen"}}),!0},onExitFullScreen:function(){e.dispatch({type:d.a.UPDATE_STATE,payload:{isFullScreen:!1}}),e.dispatch({type:f.a.UPDATE_STATE,payload:{isFullScreen:!1}});var t=document.getElementById("app"),a=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;return a&&n&&n.call(document),Object(y.g)(t,"fullscreen"),e.dispatch({type:d.a.UPDATE_STATE,payload:{isDisPlaySmall:!0,isShowPromote:!0}}),e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"live_click_quitfullscreen"}}),!0},ready:function(t){e.dispatch({type:d.a.UPDATE_STATE,payload:{camera:t}})}},chat:{ready:function(t){e.dispatch({type:d.a.UPDATE_STATE,payload:{chat:t}})}},debug:O},S?(j.liveToken=S,j.userToken=T):h&&(j.liveData={partnerId:h,roomId:x,userId:A,userName:g,userRole:P,ts:D,userAvatar:k,sign:I}),N=new p.Live(j),o.next=28,Object(s.d)({type:d.a.UPDATE_STATE,payload:{liveRoom:N}});case 28:N.on("live:login",function(t){var a=t.roomInfo,n=(a=void 0===a?{}:a).sName,r=a.iUserCount,c=a.iImId,o=a.lEndTime,s=a.lBeginTime,u=t.iUserId,p=void 0===u?0:u,f=t.sUserName,E=void 0===f?"":f,T=t.iCode,b=void 0===T?0:T;0!==b&&i.a.error("直播登录错误，错误码".concat(b)),e.dispatch({type:d.a.LIVE_LOGGED,payload:{endTime:o,baginTime:s}}),e.dispatch({type:_.a.UPDATE_STATE,payload:{userId:p}}),document.title=n||"尚直播",e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"live_enter_page"}}),e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"user_info",opts:{courseType:"live",client:"pc-web"}}}),e.dispatch({type:m.a.UPDATE_STATE,payload:{iUserCount:r}}),0==+c&&l()(c)&&e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"im_id_eq_0",opts:{url:window.location.href,sname:n,username:E}}})}),N.on("live:video_type_change",function(t){e.dispatch({type:d.a.SWITCH_WINDOW,payload:{type:t}})}),N.on("live:heartbeat",function(t){var a=t.iUserCount;e.dispatch({type:m.a.UPDATE_STATE,payload:{iUserCount:a}})}),N.on("live:begin_paper",function(t){var a=t.iPaperId;e.dispatch({type:E.a.RECEIVE_QUIZ,payload:{paperId:a}}),e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"received_quiz_message",opts:{paperId:a}}})}),N.on("live:error",function(e){var t=e.iCode;i.a.error("直播登录错误，错误码".concat(t))}),N.on("camera:volume_change",Object(y.d)(function(){var t=e.getState()["live-page"].isFullScreen?"live_click_sound_fs":"live_click_sound";e.dispatch({type:_.a.SEND_SLOG,payload:{eid:t}})},2e3)),N.on("camera:time_update",Object(y.h)(function(){e.dispatch({type:_.a.SEND_SLOG,payload:{eid:"live_keep_watch"}})},6e4)),N.on("camera:switch_button_click",function(t){var a=e.getState()["live-page"].isFullScreen;e.dispatch({type:d.a.UPDATE_STATE,payload:{isDisPlaySmall:t}}),a&&e.dispatch({type:_.a.SEND_SLOG,payload:{eid:t?"live_open_smallwindow_fs":"live_ close_smallwindow_fs"}})}),N.on("live:promotes",function(t){e.dispatch({type:f.a.SET_PURCHASE_LIST,payload:{msg:t}})}),o.next=40;break;case 39:i.a.error("缺少token，无法初始化直播。");case 40:o.next=0;break;case 42:case"end":return o.stop()}},v)}function A(){var e,t;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(s.f)(d.a.DISPOSE);case 3:return a.next=5,Object(s.e)(function(e){return e["live-page"]});case 5:return e=a.sent,(t=e.liveRoom)&&t.dispose(),a.next=10,Object(s.d)({type:d.a.UPDATE_STATE,payload:{liveRoom:null}});case 10:return a.next=12,Object(s.d)({type:_.a.SEND_SLOG,payload:{eid:"live_quit_page"}});case 12:a.next=0;break;case 14:case"end":return a.stop()}},O)}function g(){var e,t,a,n,r,c,i;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(s.f)(d.a.SWITCH_WINDOW);case 3:return e=o.sent,t=e.payload,a=(t=void 0===t?{}:t).type,o.next=9,Object(s.e)(function(e){return e["live-page"]});case 9:if(n=o.sent,r=n.camera,c=n.sketchpad,i=n.isPlayerSmall,1===a!==i||!a){o.next=16;break}return o.abrupt("continue",0);case 16:return r&&r.controlbar&&r.controlbar.showControlBar(i),c&&c.controlbar&&c.controlbar.showControlBar(!i),o.next=20,Object(s.d)({type:d.a.UPDATE_STATE,payload:{isPlayerSmall:!i}});case 20:o.next=0;break;case 22:case"end":return o.stop()}},S)}function P(){var e,t;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(s.f)(d.a.UPDATE_DATA);case 3:return e=a.sent,t=e.payload,a.next=7,Object(s.d)({type:d.a.UPDATE_STATE,payload:r()({},t)});case 7:a.next=0;break;case 9:case"end":return a.stop()}},h)}t.default={init:x,dispose:A,switchWindow:g,updatedata:P}},573:function(e,t,a){"use strict";a.r(t);var n=a(216),r=a.n(n),c=a(51),o=a.n(c),i=a(3),s=a.n(i),u=a(10),l=a.n(u),p=(a(72),a(12)),d=a(1),m=a(8),_=a(6),f=a(19),E=a(14),T=a(15),b=s.a.mark(D),y=s.a.mark(k),v=s.a.mark(I),O=s.a.mark(N),S=s.a.mark(U),h=s.a.mark(w),x=s.a.mark(C),A=s.a.mark(R),g=s.a.mark(L);function P(e){p.a.error(e)}function D(e,t){var a,n,r,c,o,i;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("yy-userMsg-promotes",t),s.next=3,Object(d.e)(function(e){return e.common});case 3:if(a=s.sent,n=a.teachUnitId,r=a.roomId,c=a.userId,o=a.partnerId,i=a.userName,!a.isLive){s.next=13;break}return s.next=13,Object(d.d)({type:_.a.REPORT_SUNL,payload:{msgType:17,params:{thirdcallSucc:e,boardcast_type:1,userMsg:JSON.stringify(l()({},t,{teachUnitId:n,roomId:r,userId:c,partnerId:o,userName:i}))}}});case 13:case"end":return s.stop()}},b)}function k(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=s.a.mark(function e(){var t,a,n,r,c,o,i,u,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(m.a.HANDLE_VOD_PROMOTES);case 2:return t=e.sent,a=t.payload.timestamp,e.next=6,Object(d.e)(function(e){return e["promotes-panel"]});case 6:if(n=e.sent,r=n.vodTotalPromotes,!(c=a)){e.next=19;break}return o=r.find(function(e,t){var a=e.lSequence,n=r.length-1>t?r[t+1]:null;return c>=a&&(!n||c<n.lSequence)&&e}),e.next=13,Object(d.e)(function(e){return e["promotes-panel"]});case 13:if(i=e.sent,u=i.promoteList,l=i.promoteTimestamp,!o||u.length&&o.lSequence===l){e.next=19;break}return e.next=19,Object(d.d)({type:m.a.SET_PURCHASE_LIST,payload:{msg:o}});case 19:case"end":return e.stop()}},e)});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},y)}function I(){var e,t,a,n,r;return s.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(d.f)(m.a.HANDLE_PURCHASE);case 3:return e=c.sent,t=e.payload,a=t.params,n=t.handleLoading,c.prev=7,n(!0),c.next=11,Object(d.a)(f.a.post,E.a.POST_PROMOTE_OEDER,a);case 11:r=c.sent,n(!1),r.payDirectUrl&&window.open(r.payDirectUrl),c.next=20;break;case 16:c.prev=16,c.t0=c.catch(7),n(!1),P(c.t0);case 20:c.next=0;break;case 22:case"end":return c.stop()}},v,null,[[7,16]])}function j(e,t){return!e.find(function(e){return t.includes(e)})}function N(){var e,t,a,n;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(d.f)(m.a.SET_PURCHASE_LIST);case 3:if(e=r.sent,t=e.payload.msg,a=t.data,n=t.lSequence,0!==t.operate){r.next=10;break}return r.delegateYield(s.a.mark(function e(){var t,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)(D,!0,{params:a,successFlag:1});case 2:return t=[],r=[],c=[],a.forEach(function(e){var a=e,n=e.locateUrl;if(Object(T.a)(n))a.type=m.a.PROMOTES_TYPE.GOODS,t.push(a);else{var i=n.split(",").map(function(e){return e.split("=")}),s=n.split(",").map(function(e){return e.split("=")[0]});if(s.includes("item")&&j(s,["coupon","deposit","buy","use"])){var u=i.find(function(e){return"item"===e[0]});if(u){var l=o()(u,2);a.itemId=l[1]}a.type=m.a.PROMOTES_TYPE.GOODS,a.loading=!1,t.push(a),r.push(a.itemId)}else if(s.includes("coupon")&&j(s,["deposit","item","buy","use"])){var p=i.find(function(e){return"coupon"===e[0]});if(p){var d=o()(p,2);a.itemId=d[1]}c.push(a.itemId),a.type=m.a.PROMOTES_TYPE.COUPON,a.loading=!1}else if(s.includes("deposit")&&j(s,["coupon","item","buy","use"])){var _=i.find(function(e){return"deposit"===e[0]});if(_){var f=o()(_,2);a.depositAmount=f[1]}a.type=m.a.PROMOTES_TYPE.NORMAL_DESPOSIT,a.loading=!1,t.push(a)}else if(s.includes("buy")&&s.includes("use")&&j(s,["deposit","item","coupon"])){var E=i.find(function(e){return"buy"===e[0]});if(E){var b=o()(E,2);a.depositAmount=b[1]}var y=i.find(function(e){return"use"===e[0]});if(y){var v=o()(y,2);a.use=v[1]}a.type=m.a.PROMOTES_TYPE.NORMAL_DESPOSIT,a.loading=!1,t.push(a)}}}),e.next=8,Object(d.d)({type:m.a.UPDATE_STATE,payload:{isShowPromote:!0,isShowCoupon:!0,promoteTimestamp:n}});case 8:if(!t.length||r.length||c.length){e.next=13;break}return e.next=11,Object(d.d)({type:m.a.UPDATE_STATE,payload:{promoteList:t}});case 11:e.next=19;break;case 13:if(!(c.length>0)){e.next=16;break}return e.next=16,Object(d.d)({type:m.a.GET_COUPON_INFO,payload:{promoteList:t,activityIds:c}});case 16:if(!(r.length>0)){e.next=19;break}return e.next=19,Object(d.d)({type:m.a.EDIT_PROMOTES_INFO,payload:{promoteList:t,promotesIds:r}});case 19:case"end":return e.stop()}},e)})(),"t0",8);case 8:r.next=12;break;case 10:return r.next=12,Object(d.d)({type:m.a.UPDATE_STATE,payload:{promoteList:[],couponList:[]}});case 12:r.next=0;break;case 14:case"end":return r.stop()}},O)}function U(){var e,t,a,n,c,o,i,u,l,p;return s.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=3,Object(d.f)(m.a.EDIT_PROMOTES_INFO);case 3:return e=_.sent,t=e.payload,a=t.promotesIds,n=t.promoteList,c=n,_.prev=8,_.delegateYield(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)(f.a.post,E.a.GET_PROMOTES_DETAIL,{ids:a.join(",")});case 2:return t=e.sent,e.next=5,Object(d.a)(D,!0,{successFlag:2,url:E.a.GET_PROMOTES_DETAIL,params:{ids:a.join(",")}});case 5:t.length>0&&(c=c.map(function(e){var a=t.find(function(t){return t.itemNo===e.itemId});if(a){var n=a.price,c=a.linePrice,o=a.itemName;return r()(e,{price:n,linePrice:c,itemName:o})}return e}));case 6:case"end":return e.stop()}},e)})(),"t0",10);case 10:_.next=20;break;case 12:return _.prev=12,_.t1=_.catch(8),P(_.t1),o=_.t1.response,i=(o=void 0===o?{}:o).status,u=void 0===i?200:i,l=o.data,p=void 0===l?_.t1:l,_.next=20,Object(d.a)(D,!1,{url:E.a.GET_PROMOTES_DETAIL,params:{ids:a.join(",")},errorResult:{status:u,data:p}});case 20:return _.next=22,Object(d.d)({type:m.a.UPDATE_STATE,payload:{promoteList:c}});case 22:_.next=0;break;case 24:case"end":return _.stop()}},S,null,[[8,12]])}function w(e){var t;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=Object(T.f)(window.location.href).userId,a.prev=1,a.next=4,Object(d.a)(f.a.post,E.a.GET_COUPON_ISJOIN,{activityId:e,stuId:t});case 4:return a.abrupt("return",a.sent);case 7:return a.prev=7,a.t0=a.catch(1),a.abrupt("return",{isJoined:!1});case 10:case"end":return a.stop()}},h,null,[[1,7]])}function C(){var e,t,a,n,r,c,o,i,u,l,p,_,T,b,y,v,O,S,h,A,g,k,I,j;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Object(d.f)(m.a.GET_COUPON_INFO);case 3:return e=s.sent,t=e.payload,a=t.activityIds,n=t.promoteList,r=n,s.prev=8,s.next=11,Object(d.d)({type:m.a.UPDATE_STATE,payload:{couponFlag:!1}});case 11:return s.next=13,Object(d.a)(f.a.post,E.a.GET_COUPONS_DETAIL,{activityIdList:a.join(",")});case 13:if(c=s.sent,o=[],!(c.length>0)){s.next=29;break}i=0;case 17:if(!(i<c.length)){s.next=27;break}return u=c[i],l=u.activityId,p=u.activityName,_=u.activityStatus,T=u.startTime,b=u.endTime,y=u.detail,v=y.couponType,O=y.couponValue,s.delegateYield(w(l),"t0",21);case 21:S=s.t0,h=S.isJoined,o.push({isJoined:h,loading:!1,id:l,activityName:p,activityStatus:_,startTime:T,endTime:b,couponType:v,couponValue:O});case 24:i+=1,s.next=17;break;case 27:return s.next=29,Object(d.d)({type:m.a.UPDATE_STATE,payload:{couponList:o,couponFlag:!0}});case 29:return s.next=31,Object(d.a)(D,!0,{successFlag:2,url:E.a.GET_COUPONS_DETAIL,params:{activityIdList:a.join(",")}});case 31:s.next=41;break;case 33:return s.prev=33,s.t1=s.catch(8),P(s.t1),A=s.t1.response,g=(A=void 0===A?{}:A).status,k=void 0===g?200:g,I=A.data,j=void 0===I?s.t1:I,s.next=41,Object(d.a)(D,!1,{url:E.a.GET_COUPONS_DETAIL,params:{activityIdList:a.join(",")},errorResult:{status:k,data:j}});case 41:return s.next=43,Object(d.d)({type:m.a.UPDATE_STATE,payload:{promoteList:r}});case 43:s.next=0;break;case 45:case"end":return s.stop()}},x,null,[[8,33]])}function R(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=s.a.mark(function e(){var t,a,n,r,c,o,i,u,l,p,_,T,b,y;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(m.a.JOIN_COUPON);case 2:return t=e.sent,a=t.payload,n=a.activityId,r=a.cb,c=a.handleLoading,e.prev=7,e.next=10,Object(d.e)(function(e){return e.common});case 10:return o=e.sent,i=o.roomId,u=o.partnerId,c(!0),e.next=16,Object(d.a)(f.a.post,E.a.JOIN_COUPON,{activityId:n,roomId:i,partnerId:u});case 16:return l=e.sent,p=l.data,c(!1),r(p||{}),e.delegateYield(w(n),"t0",21);case 21:return _=e.t0,T=_.isJoined,e.next=25,Object(d.e)(function(e){return e["promotes-panel"]});case 25:return b=e.sent,(y=b.couponList).map(function(e){return n===e.id&&(e.isJoined=T),e}),e.next=30,Object(d.d)({type:m.a.UPDATE_STATE,payload:{couponList:y,couponFlag:!0}});case 30:e.next=37;break;case 32:e.prev=32,e.t1=e.catch(7),P(e.t1),c(!1),r(e.t1);case 37:case"end":return e.stop()}},e,null,[[7,32]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},A)}function L(){var e,t,a,n,r,c,o,i,u,p,_,T;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Object(d.f)(m.a.CREATE_DEPOSIT);case 3:return e=s.sent,t=e.payload,a=t.depositAmount,n=t.itemName,r=t.cb,c=t.handleLoading,s.prev=9,s.next=12,Object(d.e)(function(e){return e.common});case 12:return o=s.sent,i=o.roomId,u=o.partnerId,p=o.userName,_={depositAmount:a,itemName:n,roomId:i,partnerId:u,userName:p},c(!0),s.next=20,Object(d.a)(f.a.post,E.a.CREATE_DEPOSIT,_);case 20:T=s.sent,c(!1),r(l()({},T,{success:!0})),s.next=30;break;case 25:s.prev=25,s.t0=s.catch(9),c(!1),P(s.t0),r({success:!1});case 30:s.next=0;break;case 32:case"end":return s.stop()}},g,null,[[9,25]])}t.default={handlePurchase:I,handlePromote:N,getPromoteDetail:U,handleVodPromotes:k,getCouponDetail:C,joinCoupon:R,creatDeposit:L}},574:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(1),o=a(87),i=a.n(o),s=a(69),u=r.a.mark(l);function l(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(c.f)([s.a.UPDATE_SEND_QA_MESSAGE]);case 3:return e=n.sent,t=e.payload,a=e.meta,n.next=8,Object(c.d)({type:s.a.UPDATE_STATE,payload:t});case 8:i()(a)&&a(),n.next=0;break;case 11:case"end":return n.stop()}},u)}t.default={updateQaMessages:l}},575:function(e,t,a){"use strict";a.r(t);var n=a(51),r=a.n(n),c=a(217),o=a.n(c),i=(a(72),a(12)),s=a(3),u=a.n(s),l=a(10),p=a.n(l),d=a(1),m=a(7),_=a(6),f=a(19),E=a(14),T=a(15),b=u.a.mark(j),y=u.a.mark(N),v=u.a.mark(U),O=u.a.mark(w),S=u.a.mark(C),h=u.a.mark(R),x=u.a.mark(L),A=u.a.mark(M),g=u.a.mark(q),P=u.a.mark(G),D=u.a.mark(F),k=u.a.mark(H),I=u.a.mark(V);function j(e,t,a){var n,r,c,o,i,s,l,m,f;return u.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("yy-userMsg-quiz",a),u.next=3,Object(d.e)(function(e){return e});case 3:if(n=u.sent,r=n.common,c=r.teachUnitId,o=r.roomId,i=r.userId,s=r.partnerId,l=r.userName,m=r.isLive,f=n.quiz.quizChannel,!m){u.next=15;break}return u.next=15,Object(d.d)({type:_.a.REPORT_SUNL,payload:{msgType:17,params:{thirdcallSucc:t,boardcast_type:e,userMsg:JSON.stringify(p()({},a,{channel:f,teachUnitId:c,roomId:o,userId:i,partnerId:s,userName:l}))}}});case 15:case"end":return u.stop()}},b)}function N(){var e,t,a,n,r,c,o,s,l,p,T,b;return u.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Object(d.e)(function(e){return e.common});case 3:return e=u.sent,t=e.teachUnitId,u.next=7,Object(d.a)(f.a.post,E.a.POST_QUERYQUIZPAPERLIST,{teachUnitId:t});case 7:return a=u.sent,n=a.quizPapers,r=void 0===n?[]:n,u.next=12,Object(d.d)({type:m.a.UPDATE_PAPER_LIST,payload:{quizPapers:r}});case 12:return u.abrupt("return",!0);case 15:return u.prev=15,u.t0=u.catch(0),u.next=19,Object(d.e)(function(e){return e.common});case 19:return c=u.sent,o=c.teachUnitId,s=u.t0.response,l=(s=void 0===s?{}:s).status,p=void 0===l?200:l,T=s.data,b=void 0===T?u.t0:T,u.next=26,Object(d.a)(j,2,!1,{url:E.a.POST_QUERYQUIZPAPERLIST,params:{teachUnitId:o},errorResult:{status:p,data:b}});case 26:return u.next=28,Object(d.a)(i.a.error,"获取随堂考列表失败");case 28:return u.next=30,Object(d.d)({type:_.a.SEND_SLOG,payload:{eid:"get_quiz_list_fail"}});case 30:return u.abrupt("return",!1);case 31:case"end":return u.stop()}},y,null,[[0,15]])}function U(){var e,t,a,n;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(d.f)(m.a.RECEIVE_QUIZ);case 3:return e=r.sent,t=e.payload.paperId,r.next=7,Object(d.a)(j,2,!0,{params:{paperId:t}});case 7:return r.next=9,Object(d.d)({type:m.a.UPDATE_STATE,payload:{quizChannel:2}});case 9:return r.next=11,Object(d.e)(function(e){return e});case 11:if(a=r.sent,n=a.common.teachUnitId,a.quiz.visible||!n){r.next=28;break}return r.next=17,Object(d.d)({type:m.a.UPDATE_STATE,payload:{loading:!0,visible:!0}});case 17:return r.next=19,Object(d.a)(N);case 19:if(!r.sent){r.next=26;break}return r.next=22,Object(d.d)({type:m.a.UPDATE_STATE,payload:{currentPaperId:t,loading:!1}});case 22:return r.next=24,Object(d.d)({type:_.a.SEND_SLOG,payload:{eid:"show_examination_modal"}});case 24:r.next=28;break;case 26:return r.next=28,Object(d.d)({type:m.a.UPDATE_STATE,payload:{visible:!1,loading:!1}});case 28:r.next=0;break;case 30:case"end":return r.stop()}},v)}function w(){var e,t,a,n,r,c,o;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,Object(d.d)({type:m.a.UPDATE_STATE,payload:{quizChannel:1}});case 3:return i.next=5,Object(d.f)(m.a.FETCH_QUIZ_LIST);case 5:return i.next=7,Object(d.e)(function(e){return e});case 7:if(e=i.sent,t=e.common,a=t.isLive,!t.isKicked){i.next=13;break}return i.abrupt("continue",0);case 13:return i.next=15,Object(d.d)({type:m.a.UPDATE_STATE,payload:{loading:!0}});case 15:return i.next=17,Object(d.a)(N);case 17:if(!i.sent){i.next=27;break}return i.next=20,Object(d.e)(function(e){return e});case 20:return n=i.sent,r=n.quiz.uncompletedPapers,c=!1,o=m.a.TIPS.unstart,r.length&&a&&(c=!0,o=m.a.TIPS.uncomplete),i.next=27,Object(d.d)({type:m.a.UPDATE_STATE,payload:{popTip:o,popVisible:c}});case 27:return i.next=29,Object(d.d)({type:m.a.UPDATE_STATE,payload:{loading:!1}});case 29:i.next=0;break;case 31:case"end":return i.stop()}},O)}function C(e){var t,a,n,c,s,l,p,_;return u.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Object(d.a)(f.a.get,E.a.GET_GETANALYSISANDSTUANSWER,{params:{recordId:e}});case 3:return t=u.sent,a=t.questionList,n=void 0===a?[]:a,c=o()(t,["questionList"]),console.log(n,c),s=n.reduce(function(e,t){var a=r()(e,2),n=a[0],c=a[1],o=t.questionId;return n[o]=t,c.push(o),[n,c]},[{},[]]),l=r()(s,2),p=l[0],_=l[1],u.next=9,Object(d.d)({type:m.a.UPDATE_STATE,payload:{questionIds:_,resultMap:p}});case 9:return u.abrupt("return",!0);case 12:return u.prev=12,u.t0=u.catch(0),i.a.error("获取考题解析失败"),u.abrupt("return",!1);case 16:case"end":return u.stop()}},S,null,[[0,12]])}function R(){var e,t,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(d.f)(m.a.CHECK_SCORE);case 3:return e=n.sent,t=e.payload.recordId,n.next=7,Object(d.d)({type:m.a.UPDATE_STATE,payload:{type:"score",scoreLoading:!0}});case 7:return n.prev=7,n.next=10,Object(d.a)(f.a.post,E.a.POST_QUERYHOMEWORKRESULT,{recordId:t});case 10:return a=n.sent,n.next=13,Object(d.d)({type:m.a.UPDATE_STATE,payload:{scoreRecord:a}});case 13:return n.next=15,Object(d.a)(C,t);case 15:n.next=23;break;case 17:return n.prev=17,n.t0=n.catch(7),n.next=21,Object(d.a)(i.a.error,"获取随堂考结果失败");case 21:return n.next=23,Object(d.d)({type:_.a.SEND_SLOG,payload:{eid:"query_homework_result_fail",opts:{recordid:t}}});case 23:return n.next=25,Object(d.d)({type:m.a.UPDATE_STATE,payload:{scoreLoading:!1}});case 25:n.next=0;break;case 27:case"end":return n.stop()}},h,null,[[7,17]])}function L(){var e,t;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(d.f)(m.a.PREV_QUESTION);case 3:return a.next=5,Object(d.e)(function(e){return e.quiz});case 5:if(e=a.sent,0!==(t=e.curIndex)){a.next=9;break}return a.abrupt("continue",0);case 9:return a.next=11,Object(d.d)({type:m.a.UPDATE_STATE,payload:{_time:Date.now(),curIndex:t-1}});case 11:a.next=0;break;case 13:case"end":return a.stop()}},x)}function M(){var e,t,a,n;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(d.f)(m.a.NEXT_QUESTION);case 3:return r.next=5,Object(d.e)(function(e){return e.quiz});case 5:if(e=r.sent,t=e.questionIds,a=e.curIndex,n=e.answerValueMap,a!==t.length-1){r.next=19;break}if(!(Object.keys(n).length<t.length)){r.next=15;break}return r.next=13,Object(d.d)({type:m.a.UPDATE_STATE,payload:{checkModal:!0,checkLoading:!1}});case 13:r.next=17;break;case 15:return r.next=17,Object(d.d)({type:m.a.SUBMIT_ANSWER});case 17:r.next=21;break;case 19:return r.next=21,Object(d.d)({type:m.a.UPDATE_STATE,payload:{curIndex:a+1}});case 21:r.next=0;break;case 23:case"end":return r.stop()}},A)}function q(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=u.a.mark(function e(){var t,a,n,c,o,s,l,p,_,T,b,y,v,O,S,h,x,A;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(m.a.FETCH_CONTENT);case 2:return e.next=4,Object(d.e)(function(e){return e});case 4:return t=e.sent,a=t.common.teachUnitId,n=t.quiz,c=n.quizPapers,o=n.currentPaperId,e.next=11,Object(d.d)({type:m.a.UPDATE_STATE,payload:{checkModal:!1,type:"",loading:!0}});case 11:return e.prev=11,e.next=14,Object(d.a)(f.a.post,E.a.POST_QUERYPAPERCONTENT,{teachUnitId:a,paperId:o});case 14:return s=e.sent,l=s.questionList,p=void 0===l?[]:l,_=s.recordId,c.find(function(e){return e.paperId===o}).recordId=_,T=p.reduce(function(e,t){var a=r()(e,2),n=a[0],c=a[1],o=t.questionId;return n[o]=t,c.push(o),[n,c]},[{},[]]),b=r()(T,2),y=b[0],v=b[1],e.next=21,Object(d.d)({type:m.a.UPDATE_STATE,payload:{questionIds:v,resultMap:y,type:"content",loading:!1,_time:Date.now(),quizPapers:c.slice()}});case 21:return e.next=23,Object(d.a)(j,3,!0,{url:E.a.GET_PROMOTES_DETAIL,params:{teachUnitId:a,paperId:o}});case 23:e.next=34;break;case 25:return e.prev=25,e.t0=e.catch(11),e.next=29,Object(d.a)(i.a.error,"获取考题内容失败");case 29:return O=e.t0.response,S=(O=void 0===O?{}:O).status,h=void 0===S?200:S,x=O.data,A=void 0===x?e.t0:x,e.next=34,Object(d.a)(j,3,!1,{url:E.a.GET_PROMOTES_DETAIL,params:{teachUnitId:a,paperId:o},errorResult:{status:h,data:A}});case 34:case"end":return e.stop()}},e,null,[[11,25]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},g)}function G(){var e,t,a,n,r,c;return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(d.f)(m.a.GO_TO_PAPER);case 3:return e=o.sent,t=e.payload.paper,a=t.paperId,n=t.recordId,r=t.quizzesPaperStatusCode,c=["COMPLETE","MARKING"].includes(r),o.next=11,Object(d.d)({type:m.a.UPDATE_STATE,payload:{currentPaperId:a,curIndex:0,_time:Date.now()}});case 11:if(!c){o.next=16;break}return o.next=14,Object(d.d)({type:m.a.CHECK_SCORE,payload:{recordId:n}});case 14:o.next=18;break;case 16:return o.next=18,Object(d.d)({type:m.a.FETCH_CONTENT});case 18:o.next=0;break;case 20:case"end":return o.stop()}},P)}function F(){var e,t,a,n,r,c,o,i,s,l,p,_,f,E;return u.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=3,Object(d.f)(m.a.DO_ANSWER);case 3:return e=u.sent,t=e.payload.answer,u.next=7,Object(d.e)(function(e){return e.quiz});case 7:if(a=u.sent,n=a.answerMap,r=a._time,c=a.curIndex,o=a.questionIds,i=a.answerValueMap,s=a.resultMap,!(l=o[c])){u.next=24;break}return i[l]=t,p=n[l],_=void 0===p?0:p,f=Date.now(),_+=Math.ceil((f-r)/1e3),n[l]=_,u.next=23,Object(d.d)({type:m.a.UPDATE_STATE,payload:{answerValueMap:i,_time:f}});case 23:console.log("答题时间".concat(l,"[").concat(t,"]: ").concat(_));case 24:if(E=s[l],"JUDGE_CHOICE"!==(E=void 0===E?{}:E).questionType||c===o.length-1){u.next=30;break}return u.next=30,Object(d.d)({type:m.a.NEXT_QUESTION});case 30:u.next=0;break;case 32:case"end":return u.stop()}},D)}function H(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=u.a.mark(function e(){var t,a,n,r,c,o,s,l,p,T,b;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(m.a.SUBMIT_ANSWER);case 2:return e.next=4,Object(d.d)({type:m.a.UPDATE_STATE,payload:{checkLoading:!0}});case 4:return e.next=6,Object(d.e)(function(e){return e});case 6:return t=e.sent,a=t.quiz,n=a.resultMap,r=a.answerMap,c=a.quizPapers,o=a.questionIds,s=a.answerValueMap,l=a.currentPaperId,p=c.find(function(e){return e.paperId===l}),T=p.recordId,b=o.map(function(e){var t=n[e],a=(t=void 0===t?{}:t).sequence,c=t.questionType,o=s[e],i=void 0===o?"":o,u=r[e];return{questionId:e,sequence:a,questionType:c,answer:i,answerTime:i?u:0}}),e.prev=16,e.next=19,Object(d.a)(f.a.post,E.a.POST_SUBMITHOMEWORK,{recordId:T,answerList:JSON.stringify(b)});case 19:return e.next=21,Object(d.d)({type:m.a.CHECK_SCORE,payload:{recordId:T}});case 21:return e.next=23,Object(d.d)({type:m.a.UPDATE_STATE,payload:{checkModal:!1}});case 23:return e.next=25,Object(d.a)(N);case 25:return e.next=27,Object(d.d)({type:_.a.SEND_SLOG,payload:{eid:"submit_examination_success",opts:{recordId:T}}});case 27:e.next=34;break;case 29:return e.prev=29,e.t0=e.catch(16),i.a.error("交卷失败"),e.next=34,Object(d.d)({type:_.a.SEND_SLOG,payload:{eid:"submit_examination_failure",opts:{recordId:T}}});case 34:return e.next=36,Object(d.d)({type:m.a.UPDATE_STATE,payload:{checkLoading:!1}});case 36:case"end":return e.stop()}},e,null,[[16,29]])});case 1:return t.delegateYield(e(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}},k)}function V(){var e,t,a,n,r,c;return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(d.f)(m.a.START_BTN_CLICKED);case 3:return o.next=5,Object(d.e)(function(e){return e});case 5:if(e=o.sent,t=e.quiz,a=t.popVisible,n=t.quizPapers,r=e.common.isKicked,n.length&&!r){o.next=19;break}return o.next=13,Object(d.d)({type:m.a.UPDATE_STATE,payload:{popVisible:!0,popTip:m.a.TIPS.unstart}});case 13:return o.next=15,Object(d.a)(T.e,3e3);case 15:return o.next=17,Object(d.d)({type:m.a.UPDATE_STATE,payload:{popVisible:!1}});case 17:o.next=23;break;case 19:return c={visible:!0,quizChannel:3},a&&(c.popVisible=!1),o.next=23,Object(d.d)({type:m.a.UPDATE_STATE,payload:c});case 23:o.next=0;break;case 25:case"end":return o.stop()}},I)}t.default={prevQuestion:L,nextQuestion:M,fetchContent:q,startBtnClicked:V,receiveQuiz:U,fetchQuizListSaga:w,checkScore:R,goToPaper:G,doAnswer:F,submitQuestion:H}},577:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),c=a(3),o=a.n(c),i=(a(72),a(12)),s=a(1),u=a(156),l=a(15),p=a(17),d=a(8),m=a(6),_=a(19),f=a(14),E=o.a.mark(S),T=o.a.mark(h),b=o.a.mark(x),y=o.a.mark(A),v=o.a.mark(g),O=o.a.mark(P);function S(){var e,t,a,n,r,c;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(s.e)(function(e){return e.common});case 3:return e=o.sent,t=e.teachUnitId,a=e.user.userId,n={teachUnitId:t,stuId:a,videoType:"normal"},o.next=9,Object(s.a)(_.a.post,f.a.GET_STUDY_RECORD,n);case 9:return r=o.sent,c=r.studyProgress,o.next=13,Object(s.d)({type:p.a.UPDATE_STATE,payload:{studyProgress:c}});case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(0),i.a.error(o.t0||"获取学习进度失败");case 18:case"end":return o.stop()}},E,null,[[0,15]])}function h(e){var t;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=o.a.mark(function t(){var a,n,r,c,_,f,E,T,b,y,v,O,h,x,A,g,P,D,k,I,j;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.f)(p.a.INIT);case 2:return a=t.sent,n=a.payload,r=n.boardRef,c=n.playerRef,_=n.vodChat,t.next=9,Object(s.e)(function(e){return e});case 9:return f=t.sent,E=f.common,T=E.teachUnitId,b=E.token,y=E.debug,v=E.partnerId,O=E.roomId,h=E.userId,x=E.userName,A=E.userRole,g=E.ts,P=E.userAvatar,D=E.sign,k=!!T&&!!h,t.next=25,Object(s.d)({type:p.a.UPDATE_STATE,payload:{useServerRecord:k}});case 25:if(!k){t.next=28;break}return t.next=28,Object(s.a)(S);case 28:if(!b&&!v){t.next=49;break}return I={liveToken:b,sketchpad:{el:r,ready:function(t){e.dispatch({type:p.a.UPDATE_STATE,payload:{sketchpad:t}})}},camera:{el:c,seekToLastPlay:!k,onFullScreen:function(){e.dispatch({type:p.a.UPDATE_STATE,payload:{isFullScreen:!0}}),e.dispatch({type:d.a.UPDATE_STATE,payload:{isFullScreen:!0}});var t=document.getElementsByTagName("body")[0],a=document.getElementById("app"),n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;return n&&n.call(t),Object(l.b)(a,"fullscreen"),e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"replay_click_fullscreen"}}),!0},onExitFullScreen:function(){e.dispatch({type:p.a.UPDATE_STATE,payload:{isFullScreen:!1}}),e.dispatch({type:d.a.UPDATE_STATE,payload:{isFullScreen:!1}});var t=document.getElementById("app"),a=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;return a&&n&&n.call(document),Object(l.g)(t,"fullscreen"),e.dispatch({type:p.a.UPDATE_STATE,payload:{isDisPlaySmall:!0}}),e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"replay_click_quitfullscreen"}}),!0},ready:function(t){e.dispatch({type:p.a.UPDATE_STATE,payload:{camera:t}})}},chat:{ready:function(t){e.dispatch({type:p.a.UPDATE_STATE,payload:{chat:t}})}},debug:y},b?I.liveToken=b:v&&(I.liveData={partnerId:v,roomId:O,userId:h,userName:x,userRole:A,ts:g,userAvatar:P,sign:D}),j=new u.Replay(I),t.next=34,Object(s.d)({type:p.a.UPDATE_STATE,payload:{replayRoom:j}});case 34:j.on("replay:login",function(t){var a=t.roomInfo,n=(a=void 0===a?{}:a).sName,r=t.iUserId,c=t.videoPlayUrls,o=t.iCode,s=void 0===o?0:o;0!==s&&i.a.error("点播登录错误，错误码".concat(s));var u=0;c.forEach(function(e){u+=e.dTotalDuration}),e.dispatch({type:p.a.UPDATE_STATE,payload:{duration:u}}),e.dispatch({type:m.a.UPDATE_STATE,payload:{userId:r}}),document.title=n,e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"replay_enter_page"}}),e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"user_info",opts:{courseType:"video",client:"pc-web"}}})}),j.on("replay: video_type_change",function(t){e.dispatch({type:p.a.SWITCH_WINDOW,payload:{type:t}})}),j.on("replay:error",function(e){var t=e.iCode;40002===t?i.a.error("您的登录已过期，请重新进入课程。"):i.a.error("点播登录错误，错误码".concat(t))}),j.on("camera:volume_change",Object(l.d)(function(){var t=e.getState()["vod-page"].isFullScreen?"replay_click_sound_fs":"replay_click_sound";e.dispatch({type:m.a.SEND_SLOG,payload:{eid:t}})},2e3)),j.on("camera:rate_change",function(t){var a=e.getState()["vod-page"].isFullScreen,n=p.a.PLAY_BACK_RATE[t],r=a?"_fs":"";e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"".concat(n).concat(r)}})}),j.on("camera:time_update",Object(l.h)(function(){e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"replay_keep_watch"}})},6e4)),j.on("camera:time_update",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).timestamp;_&&_.handleMetaDataUpdate(e)}),j.on("camera:time_update",Object(l.h)(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).timestamp;t&&e.dispatch({type:d.a.HANDLE_VOD_PROMOTES,payload:{timestamp:t}})},2e3)),j.on("camera:seeked",function(t){var a=t.timestamp;_&&_.handleVideoSeeked(a),e.dispatch({type:d.a.UPDATE_STATE,payload:{promoteList:[],promoteTimestamp:null}})}),j.on("camera:switch_button_click",function(t){var a=e.getState()["vod-page"].isFullScreen;e.dispatch({type:p.a.UPDATE_STATE,payload:{isDisPlaySmall:t}}),a&&e.dispatch({type:m.a.SEND_SLOG,payload:{eid:t?"replay_open_smallwindow_fs":"replay_close_smallwindow_fs"}})}),j.on("camera:playback_rate_button_click",function(){e.dispatch({type:m.a.SEND_SLOG,payload:{eid:"replay_click_speed"}})}),j.on("camera:loaded_metadata",function(){var t=e.getState()["vod-page"],a=t.hasSetHistory,n=t.camera,r=t.studyProgress,c=t.duration,o=t.useServerRecord;n.currentTime&&o&&!a&&(n.currentTime(r*c),e.dispatch({type:p.a.UPDATE_STATE,payload:{hasSetHistory:!0}}))}),j.on("live:promotes",function(t){console.log("replayRoom 全量商品推送消息",t),e.dispatch({type:d.a.UPDATE_STATE,payload:{vodTotalPromotes:t}})}),t.next=50;break;case 49:i.a.error("缺少token，无法初始化点播。");case 50:case"end":return t.stop()}},t)});case 1:return a.delegateYield(t(),"t0",3);case 3:a.next=1;break;case 5:case"end":return a.stop()}},T)}function x(){var e,t,a,n,r,c,i,u;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(s.f)(p.a.SEND_STUDY_RECORD);case 3:return o.next=5,Object(s.e)(function(e){return e["vod-page"]});case 5:return e=o.sent,t=e.camera,a=e.duration,n=e.useServerRecord,o.next=11,Object(s.e)(function(e){return e.common});case 11:if(r=o.sent,c=r.teachUnitId,i=r.user.userId,!n){o.next=18;break}return u={teachUnitId:c,stuId:i,studyProgress:t.currentTime()/a,watchDevice:"web",videoType:"normal"},o.next=18,Object(s.a)(_.a.post,f.a.SEND_STUDY_RECORD,u);case 18:o.next=0;break;case 20:case"end":return o.stop()}},b)}function A(){var e,t;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(s.f)(p.a.DISPOSE);case 3:return a.next=5,Object(s.e)(function(e){return e["vod-page"]});case 5:return e=a.sent,(t=e.replayRoom)&&t.dispose(),a.next=10,Object(s.d)({type:p.a.UPDATE_STATE,payload:{replayRoom:null}});case 10:return a.next=12,Object(s.d)({type:m.a.SEND_SLOG,payload:{eid:"replay_quit_page"}});case 12:a.next=0;break;case 14:case"end":return a.stop()}},y)}function g(){var e,t,a,n,r,c,i;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(s.f)(p.a.SWITCH_WINDOW);case 3:return e=o.sent,t=e.payload,a=(t=void 0===t?{}:t).type,o.next=9,Object(s.e)(function(e){return e["vod-page"]});case 9:if(n=o.sent,r=n.camera,c=n.sketchpad,i=n.isPlayerSmall,1===a!==i||!a){o.next=16;break}return o.abrupt("continue",0);case 16:return r&&r.controlbar&&r.controlbar.showControlBar(i),c&&c.controlbar&&c.controlbar.showControlBar(!i),o.next=20,Object(s.d)({type:p.a.UPDATE_STATE,payload:{isPlayerSmall:!i}});case 20:o.next=0;break;case 22:case"end":return o.stop()}},v)}function P(){var e,t;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(s.f)(p.a.UPDATE_DATA);case 3:return e=a.sent,t=e.payload,a.next=7,Object(s.d)({type:p.a.UPDATE_STATE,payload:r()({},t)});case 7:a.next=0;break;case 9:case"end":return a.stop()}},O)}t.default={init:h,dispose:A,switchWindow:g,sendStudyRecord:x,updatedata:P}},594:function(e,t,a){var n={"./zh-cn":285,"./zh-cn.js":285};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=594},6:function(e,t,a){"use strict";t.a={UPDATE_STATE:"common/update-state",KICK_OUT:"common/kick-out",AUTH:"common/AUTH",SEND_SLOG:"common/SEND_SLOG",SWITCH_WINDOW:"common/SWITCH_WINDOW",REPORT_SUNL:"common/REPORT_SUNL"}},600:function(e,t,a){},601:function(e,t,a){"use strict";a.r(t);var n,r,c,o=a(10),i=a.n(o),s=(a(332),a(334),a(335),a(337),a(338),a(340),a(341),a(175),a(344),a(345),a(347),a(348),a(349),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(363),a(364),a(365),a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(382),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(408),a(409),a(410),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(245),a(424),a(426),a(427),a(428),a(429),a(430),a(431),a(433),a(434),a(435),a(436),a(437),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(453),a(454),a(455),a(456),a(457),a(458),a(459),a(460),a(461),a(462),a(463),a(464),a(465),a(466),a(467),a(468),a(469),a(470),a(471),a(472),a(473),a(253),a(0)),u=a.n(s),l=a(23),p=a.n(l),d=a(77),m=a(21),_=a(309),f=a(290),E=a(158),T=a(159),b=(a(484),a(79)),y=a(205),v=a(206),O=(a(218),a(139)),S=a(30),h=a.n(S),x=a(31),A=a.n(x),g=a(32),P=a.n(g),D=a(33),k=a.n(D),I=a(34),j=a.n(I),N=a(2),U=a.n(N),w=a(6),C=a(299),R=a.n(C),L=Object(m.c)(function(e){return{loading:e.common.loading}})((c=r=function(e){function t(e){var a;return h()(this,t),a=P()(this,k()(t).call(this,e)),e.dispatch({type:w.a.AUTH}),a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this.props,a=e.loading,n=e.route.routes;return a?t.loadingElement:u.a.createElement(s.Suspense,{fallback:t.loadingElement},Object(T.a)(n))}}]),t}(s.Component),r.propTypes={loading:U.a.bool.isRequired},r.loadingElement=u.a.createElement(O.a,{tip:"加载中...",wrapperClassName:R.a.main},u.a.createElement("div",null)),n=c))||n,M=a(48),q=a.n(M),G=a(24),F=a(3),H=a.n(F),V=a(130),W=a.n(V),z=a(86),Y=a.n(z),B=(a(163),a(92)),K=a(60),Q={0:"服务器返回正确",1:"数据库错误",2:"入参错误",3:"直播间不存在",4:"json解析错误",5:"直播间不存在改成员",6:"直播间禁言",7:"敏感词屏蔽",8:"非注册用户",9:"用户无操作权限",10:"直播间满员"},J=a(212),Z=a.n(J);var X=[],$=document.createElement("div"),ee=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MSTransitionEnd:"MSTransitionEnd"};for(var a in t)if(void 0!==e.style[a])return t[a];return"transitionend"}();function te(e){return new Promise(function(t){var a=document.createElement("div"),n=$.clientWidth;a.className=Z.a.box,a.style.left="".concat(n,"px"),a.innerText="广播：".concat(e.msgData),a.addEventListener(ee,function(e){$.removeChild(a),t()}),$.appendChild(a);var r=a.clientWidth;a.style.left="-".concat(r,"px")})}$.className=Z.a.wrap,document.body.appendChild($);var ae={add:function(e){X.push(e),this._show()},_isScrolling:!1,_show:function(){var e=W()(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isScrolling){e.next=2;break}return e.abrupt("return");case 2:this._isScrolling=!0;case 3:if(!X.length){e.next=9;break}return e.next=6,te(X[0]);case 6:X.splice(0,1),e.next=3;break;case 9:this._isScrolling=!1;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ne=a(15),re=a(36),ce=a(69),oe=Object(s.lazy)(function(){return Promise.all([a.e(1),a.e(2)]).then(a.bind(null,820))}),ie=0,se=2,ue=function(e){function t(e){var a;return h()(this,t),(a=P()(this,k()(t).call(this,e))).componentWillUnmount=function(){var e=a.props.chat;e&&e.dispose()},a.onSelectEmotion=function(){return a.sendSlog("live_click_look")},a.getSLEmoji=function(){return a.props.chat?a.props.chat.getSLEmoji():{}},a.setMessage=Object(ne.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;a.props.dispatch({type:re.a.UPDATE_CHAT_MESSAGE,payload:{chatData:e.slice()},meta:t})},200),a.initChat=function(){var e=a.props.liveRoom;e.on("live:kicked",a.handleKicked),e.on("chat:login",a.handleLoginReply),e.on("chat:initial_room_announce",a.updateAnnounce),e.on("chat:room_announce_update",a.updateAnnounce),e.on("chat:send_message_status",a.handleMessageReply),e.on("chat:receive_message",a.handleMessageRecv),e.on("chat:user_notification",a.handleUserNotify),e.on("chat:room_speaking_status",a.handleSpeakingChanged),e.on("chat:room_dismiss",a.handleRoomDismissed),e.on("chat:user_kicked_for_new_login",a.handleUserKicked),e.on("chat:bulk_exit_notification",a.handleBulkExitNotify),e.on("chat:user_speaking_status",a.handleUserForbiddenStatus),e.on("chat:websocket_error",a.handleWebsocketError)},a.updateAnnounce=function(e){var t=e.data;a.props.dispatch({type:re.a.UPDATE_STATE,payload:{announceData:t}})},a.handleWebsocketError=function(e){a.props.dispatch({type:re.a.UPDATE_STATE,payload:{connectStatus:0}}),a.props.dispatch({type:ce.a.UPDATE_STATE,payload:{connectStatus:0}})},a.handleKicked=function(){var e=a.props,t=e.dispatch;e.history.replace("/wait"),t({type:w.a.KICK_OUT}),t({type:w.a.SEND_SLOG,payload:{eid:"userkicked"}})},a.handleBulkExitNotify=function(e){},a.handleUserForbiddenStatus=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=(e=void 0===e?{}:e).status;a.props.dispatch({type:re.a.UPDATE_STATE,payload:{forbiddenStatusSingle:t}}),a.props.dispatch({type:ce.a.UPDATE_STATE,payload:{forbiddenStatusSingle:t}})},a.handleUserKicked=function(e){B.a.error({title:"你已经在其他地方登陆"})},a.handleRoomDismissed=function(e){a.chat&&a.chat.dispose()},a.handleSpeakingChanged=function(e){var t=e.data.status;a.props.dispatch({type:re.a.UPDATE_STATE,payload:{forbiddenStatus:t}}),a.props.dispatch({type:ce.a.UPDATE_STATE,payload:{forbiddenStatus:t}})},a.handleUserNotify=function(e){},a.handleLoginReply=function(e){var t=e.data,n=e.result,r=0!==n;r&&B.a.error({title:"聊天登录失败，原因: ".concat(Q[n])});var c=t.forbiddenStatus,o=t.forbiddenStatusSingle,i=t.messageData,s=void 0===i?[]:i,u=t.userIdentity,l=t.userToken,p=t.portrait,d=1,m=t.qaData;!Y()(m)&&m||(m=[[]]),r&&(d=0);var _=s.reduce(function(e,t){return t.msgType===se?ae.add(t):e.push(t),e},[]);a.messageList=_,a.props.dispatch({type:re.a.LOADING_REPLY,payload:{forbiddenStatusSingle:o,forbiddenStatus:c,connectStatus:d,userIdentity:u,userToken:l,chatData:_,portrait:p},meta:function(){var e=W()(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return a.handleSendText(null,Q[n]),e.abrupt("return");case 3:if(!_.length){e.next=7;break}return e.next=6,Object(ne.e)(20);case 6:a.chatPanel&&a.chatPanel.updateChatScroll(!0,0,!0);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),a.props.dispatch({type:ce.a.UPDATE_SEND_QA_MESSAGE,payload:{qaData:m[0],forbiddenStatusSingle:o,forbiddenStatus:c,connectStatus:d,userIdentity:u,userToken:l,portrait:p}})},a.handleMessageReply=function(e){0!==e.result&&a.sendSlog("send_im_failure")},a.handleMessageRecv=function(e){var t=e.data,n=t.name,r=t.portrait,c=t.msgData,o=t.msgType,i={name:n,msgData:c,msgType:o,portrait:r,recordId:t.recordId,createTime:t.createTime,userIdentity:t.userIdentity};o===se?ae.add(i):(a.messageList.push(i),a.setMessage(a.messageList,function(){a.chatPanel&&a.chatPanel.updateChatScroll()}))},a.handleSendText=function(e,t){var n=a.props.data,r=n.forbiddenStatusSingle,c=n.forbiddenStatus,o=n.connectStatus,i=n.userIdentity,s=n.userToken,u={portrait:n.portrait,name:"我",recordId:"self_msg_".concat(ie+=1),userIdentity:i,msgData:e,fromUserToken:s};if(0===o)u={name:"[提示]",msgData:t||"服务连接中，请稍候重试...",recordId:"self_msg_".concat(ie),isError:!0};else{if(0!==c||0!==r)return;a.props.chat.sendMessage(e),a.props.dispatch({type:re.a.START_COUNTDOWN})}a.messageList.push(u),a.props.dispatch({type:re.a.UPDATE_CHAT_MESSAGE,payload:{chatData:a.messageList.slice()},meta:function(){var e=W()(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)(10);case 2:a.chatPanel&&a.chatPanel.updateChatScroll();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),a.sendSlog("live_click_send")},a.messageList=[],a.initChat(),a}return j()(t,e),A()(t,[{key:"sendSlog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.dispatch({type:w.a.SEND_SLOG,payload:{eid:e,opts:t}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.chat,n=t.data,r=n.chatData,c=n.userToken,o=n.iUserCount,i=n.announceData,s=n.connectStatus,l=n.countdownNumber,p=n.forbiddenStatus,d=n.forbiddenStatusSingle,m=1;return 0===s?m=0:(1===d&&(m=2),1===p&&(m=3)),!!a&&u.a.createElement(oe,{ref:function(t){e.chatPanel=t},emoji:this.getSLEmoji(),onSend:this.handleSendText,iUserCount:o,chatData:r,announceData:i,status:m,sendSlog:this.sendSlog,onSelectEmotion:this.onSelectEmotion,userToken:c,countdownNumber:l})}}]),t}(s.Component);ue.propTypes={liveRoom:U.a.object.isRequired,chat:U.a.object,data:U.a.object.isRequired},ue.defaultProps={chat:null};var le=Object(K.e)(Object(m.c)(function(e){return{data:e.chat}})(ue)),pe=a(155),de=a(89),me=a.n(de),_e=a(8),fe=a(41),Ee=a.n(fe),Te=a(157),be=a.n(Te),ye=(a(119),a(43)),ve=a(306),Oe=a.n(ve),Se=a(307),he=a.n(Se),xe=q.a.bind(Ee.a),Ae=function(e){function t(e){var a;return h()(this,t),(a=P()(this,k()(t).call(this,e))).state={},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onClose,n=e.isJoinResult;return u.a.createElement(B.a,{title:"",visible:t,onCancel:function(){return a()},footer:null,width:"320px"},u.a.createElement("div",{className:xe("couponModal")},u.a.createElement("img",{src:"200"===n.code?Oe.a:he.a,alt:""}),u.a.createElement("p",{className:xe("tip")},n.msg),u.a.createElement(ye.a,{type:"primary",onClick:function(){return a()}},"好的")))}}]),t}(s.Component);Ae.propTypes={visible:U.a.bool,onClose:U.a.func,isJoinResult:U.a.object},Ae.defaultProps={visible:!1,isJoinResult:{},onClose:function(){}};var ge=Object(m.c)(function(e){return{common:e.common,data:e["promotes-panel"]}})(Ae),Pe=q.a.bind(Ee.a),De=function(e){function t(e){var a;return h()(this,t),(a=P()(this,k()(t).call(this,e))).handleGetCoupon=function(e){1!==e.activityStatus||e.isJoined||a.props.dispatch({type:_e.a.JOIN_COUPON,payload:{activityId:e.id,cb:function(e){a.setState({visibleCoupon:!0,isJoinResult:e})},handleLoading:function(e){a.setState({loading:e})}}})},a.state={visibleCoupon:!1,isJoinResult:{},loading:!1},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this,t=this.props.item,a=this.state,n=a.visibleCoupon,r=a.isJoinResult,c=a.loading;return u.a.createElement(u.a.Fragment,{key:t.id},u.a.createElement("div",{className:Pe(["coupon-box",void 0===t.activityStatus||1===t.activityStatus?"coupon-active":"coupon-unusable",t.isJoined&&"coupon-joined",(1!==t.activityStatus||t.isJoined)&&"disabled"]),onClick:function(){return e.handleGetCoupon(t)},key:t.id},u.a.createElement("div",{className:Pe("coupon-price")},"VOUCHER"===t.couponType?u.a.createElement(u.a.Fragment,null," ",u.a.createElement("span",null,"¥"),t.couponValue," "):u.a.createElement(u.a.Fragment,null," ",t.couponValue||"--",u.a.createElement("span",null,"折")," ")),u.a.createElement("div",{className:Pe("coupon-content")},u.a.createElement("p",{className:Pe("coupon-name")},t.activityName||"--"),u.a.createElement("p",{className:Pe("coupon-time")},be()(t.startTime).format("YYYY.MM.DD"),"-",be()(t.endTime).format("YYYY.MM.DD"))),c?u.a.createElement("div",{className:Pe("coupon-loading")},u.a.createElement(O.a,null)):""),u.a.createElement(ge,{visible:n,isJoinResult:r,onClose:function(){return e.setState({visibleCoupon:!1})}}))}}]),t}(s.Component);De.propTypes={item:U.a.object},De.defaultProps={item:{}};var ke=Object(m.c)(function(e){return{common:e.common,data:e["promotes-panel"]}})(De),Ie=(a(72),a(12)),je=a(308),Ne=a.n(je),Ue=q.a.bind(Ee.a),we=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=P()(this,(e=k()(t)).call.apply(e,[this].concat(r)))).copyUrl=function(e){Object(ne.c)(e).then(function(e){Ie.a.success("复制成功")})},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.despositInfo.url,r=t.onClose;return u.a.createElement(B.a,{title:"定金支付",visible:a,onCancel:function(){return r()},footer:null,width:"420px"},u.a.createElement("div",{className:Ue("deposit-modal")},u.a.createElement("h5",{className:Ue("url-title")},"定金支付链接"),u.a.createElement("p",{className:Ue("deposit-url")},n,u.a.createElement("span",{onClick:function(){return e.copyUrl(n)}},"复制")),u.a.createElement("div",{className:Ue("ma-img")},u.a.createElement(Ne.a,{value:n})),u.a.createElement("div",{className:Ue("img-tip")},"定金支付页面二维码"),u.a.createElement(ye.a,{type:"primary",onClick:function(){return r()}},"确定")))}}]),t}(s.Component);we.propTypes={visible:U.a.bool,despositInfo:U.a.object,onClose:U.a.func},we.defaultProps={visible:!1,despositInfo:{},onClose:function(){}};var Ce=Object(m.c)(function(e){return{data:e["promotes-panel"]}})(we),Re=q.a.bind(Ee.a),Le=function(e){function t(e){var a;return h()(this,t),(a=P()(this,k()(t).call(this,e))).handleDeposit=function(e){var t=e.name,n=e.depositAmount;a.props.dispatch({type:_e.a.CREATE_DEPOSIT,payload:{depositAmount:n,itemName:t,handleLoading:function(e){a.setState({loading:e})},cb:function(e){e.success&&a.setState({visibleDeposit:!0,despositInfo:e})}}})},a.state={visibleDeposit:!1,despositInfo:{},loading:!1},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.promoteTimestamp,r=t.type,c=this.state,o=c.visibleDeposit,i=c.despositInfo,s=c.loading;return u.a.createElement(u.a.Fragment,null,"normal"===r?u.a.createElement("div",{className:Re("promotes-box"),key:n+a.id},u.a.createElement("div",{className:Re("img-box")},u.a.createElement("img",{src:a.pictureUrl,alt:""})),u.a.createElement("h5",{className:Ee.a.name},a.name),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:Re("coupon-wrap")},u.a.createElement("span",null,"定金："),u.a.createElement("div",{className:Re("price")},"¥",u.a.createElement("span",null,a.depositAmount)),a.use&&u.a.createElement("div",{className:Re("deduction")},"可抵用¥",a.use)),u.a.createElement(ye.a,{className:Re("purchase-btn"),type:"primary",loading:s,onClick:function(){return e.handleDeposit(a)}},"支付定金"))):u.a.createElement("div",{className:Re("promotes-box"),key:n+a.id},u.a.createElement("div",{className:Re("img-box")},u.a.createElement("img",{src:a.pictureUrl,alt:""})),u.a.createElement("div",{className:Re("main")},u.a.createElement("h5",{className:Ee.a.name},a.name),u.a.createElement("div",{className:Re("desposit-wrap")},u.a.createElement("div",{className:Re("price-wrap")},u.a.createElement("span",{className:Re("label")},"定金："),u.a.createElement("div",{className:Re("desposit-price")},u.a.createElement("div",{className:Re("price")},"¥",u.a.createElement("span",null,a.depositAmount)),a.use&&u.a.createElement("div",{className:Re("deduction")},"（可抵用¥",a.use,"）"))),u.a.createElement(ye.a,{className:Re("purchase-btn"),type:"primary",loading:s,onClick:function(){return e.handleDeposit(a)}},"支付定金")))),u.a.createElement(Ce,{visible:o,despositInfo:i,onClose:function(){return e.setState({visibleDeposit:!1})}}))}}]),t}(s.Component);Le.propTypes={item:U.a.object,promoteTimestamp:U.a.number,type:U.a.string},Le.defaultProps={item:{},promoteTimestamp:0,type:"normal"};var Me=Object(m.c)(function(e){return{common:e.common,data:e["promotes-panel"]}})(Le),qe=a(138),Ge=a.n(qe),Fe=q.a.bind(Ee.a),He=function(e){function t(e){var a;return h()(this,t),(a=P()(this,k()(t).call(this,e))).itemPromote=function(e){var t=Ge()(a),n=t.props.data.promoteTimestamp,r=t.state.loading;return u.a.createElement("div",{className:Fe("promotes-box"),key:n+e.id},u.a.createElement("div",{className:Fe("img-box")},u.a.createElement("img",{src:e.pictureUrl,alt:""})),u.a.createElement("h5",{className:Ee.a.name},e.name),Object(ne.a)(e.locateUrl)?u.a.createElement(ye.a,{className:Fe("purchase-btn"),type:"primary",loading:r,onClick:function(){return a.handlePromote(e,!0)}},"查看详情"):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:Fe("price-wrap")},u.a.createElement("div",{className:Fe("price")},"¥",u.a.createElement("span",null,e.price)),e.linePrice?u.a.createElement("del",null,"¥",e.linePrice):""),u.a.createElement(ye.a,{className:Fe("purchase-btn"),type:"primary",loading:r,onClick:function(){return a.handlePromote(e,!1)}},"立即购买")))},a.itemPromoteFullpage=function(e){var t=Ge()(a),n=t.props.data.promoteTimestamp,r=t.state.loading;return u.a.createElement("div",{className:Fe("promotes-box"),key:n+e.id},u.a.createElement("div",{className:Fe("img-box")},u.a.createElement("img",{src:e.pictureUrl,alt:""})),u.a.createElement("div",{className:Fe("main")},u.a.createElement("h5",{className:Ee.a.name},e.name),u.a.createElement("div",{className:Fe("price-btn")},Object(ne.a)(e.locateUrl)?u.a.createElement(ye.a,{className:Fe("purchase-btn"),type:"primary",loading:r,onClick:function(){return a.handlePromote(e,!0)}},"查看详情"):u.a.createElement(u.a.Fragment,null,e.price||e.linePrice?u.a.createElement("div",{className:Fe("price-wrap")},u.a.createElement("div",{className:Fe("price")},"¥",u.a.createElement("span",null,e.price)),e.linePrice?u.a.createElement("del",null,"¥",e.linePrice):""):"",u.a.createElement(ye.a,{className:Fe("purchase-btn"),type:"primary",loading:r,onClick:function(){return a.handlePromote(e,!1)}},"立即购买")))))},a.handlePromote=function(e,t){if(t)window.open(e.locateUrl);else{var n=a.props.common,r=n.roomId,c=n.userName,o=n.partnerId,i=e.itemId,s=e.itemName,u=void 0===s?"":s,l=e.price,p=void 0===l?"":l,d=Object(ne.f)(window.location.href).userId;a.props.dispatch({type:_e.a.HANDLE_PURCHASE,payload:{params:{stuId:d,roomId:r,userName:c,partnerId:o,itemNo:i,itemTitle:u,itemPrice:p},handleLoading:function(e){a.setState({loading:e})}}})}},a.state={loading:!1},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.type;return u.a.createElement(u.a.Fragment,{key:t.id},"normal"===a?this.itemPromote(t):this.itemPromoteFullpage(t))}}]),t}(s.Component);He.propTypes={item:U.a.object,type:U.a.string,data:U.a.object,common:U.a.object},He.defaultProps={item:{},type:"normal",data:{},common:{}};var Ve=Object(m.c)(function(e){return{common:e.common,data:e["promotes-panel"]}})(He),We=q.a.bind(Ee.a),ze={visibleDeposit:!0,visibleCoupon:!1},Ye=function(e){function t(){var e;return h()(this,t),(e=P()(this,k()(t).call(this))).onHiddenPromotes=function(){e.props.dispatch({type:_e.a.UPDATE_STATE,payload:{isShowPromote:!1}})},e.onHiddenCoupon=function(){e.props.dispatch({type:_e.a.UPDATE_STATE,payload:{isShowCoupon:!1}})},e.renderPromotes=function(){var t=e.props.data,a=t.promoteList,n=t.couponList,r=t.couponFlag,c=t.isShowPromote,o=t.isShowCoupon,i=t.isFullScreen,s=t.promoteTimestamp;return i?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:We("fullpage-promotes-wrap")},o&&r&&n.length?u.a.createElement("div",{className:We("coupon-wrap")},u.a.createElement("div",{className:We("close"),onClick:function(){return e.onHiddenCoupon()}}),u.a.createElement("div",{className:We("coupon-list")},n.map(function(e){return u.a.createElement(ke,{item:e,key:s+e.id})}))):null,a.length>0&&c?u.a.createElement("div",{className:We("promotes-wrap")},u.a.createElement("div",{className:We("close"),onClick:function(){return e.onHiddenPromotes()}}),u.a.createElement("div",{className:We("promotes-list")},a.map(function(e){return e.type===_e.a.PROMOTES_TYPE.GOODS?u.a.createElement(Ve,{item:e,type:"fullpage",key:s+e.id}):(e.type===_e.a.PROMOTES_TYPE.NORMAL_DESPOSIT||e.type===_e.a.PROMOTES_TYPE.NORMAL_DESPOSIT)&&u.a.createElement(Me,{item:e,promoteTimestamp:s,type:"fullPage",key:s+e.id})}))):null)):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:We("promotes-wrap")},n.length&&r?u.a.createElement("div",null,u.a.createElement("h4",{className:Ee.a.title},"优惠券"),u.a.createElement("div",{className:We("coupon-list")},n.map(function(e){return u.a.createElement(ke,{item:e,key:s+e.id})}))):u.a.createElement("div",null),a.length?u.a.createElement("div",null,u.a.createElement("h4",{className:Ee.a.title},"老师推荐"),u.a.createElement("div",{className:We("promotes-list")},a.map(function(e){return e.type===_e.a.PROMOTES_TYPE.GOODS?u.a.createElement(Ve,{item:e,type:"normal",key:s+e.id}):(e.type===_e.a.PROMOTES_TYPE.NORMAL_DESPOSIT||e.type===_e.a.PROMOTES_TYPE.NORMAL_DESPOSIT)&&u.a.createElement(Me,{item:e,promoteTimestamp:s,type:"normal",key:s+e.id})}))):u.a.createElement("div",null)))},e.state=ze,e}return j()(t,e),A()(t,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,this.renderPromotes())}}]),t}(s.Component);Ye.propTypes={common:U.a.shape({roomId:U.a.number,userName:U.a.string,partnerId:U.a.number}),data:U.a.object},Ye.defaultProps={common:{roomId:null,userName:"",partnerId:""},data:{}};var Be=Object(m.c)(function(e){return{common:e.common,data:e["promotes-panel"]}})(Ye),Ke=q.a.bind(me.a),Qe=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=P()(this,(e=k()(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.dispatch({type:G.a.INIT,payload:{boardRef:a.boardRef,playerRef:a.playerRef}})},a.componentWillUnmount=function(){a.props.dispatch({type:G.a.DISPOSE})},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.common.userId,n=t.data,r=n.isPlayerSmall,c=n.liveRoom,o=n.chat,i=n.isDisPlaySmall;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:me.a.left},u.a.createElement("div",{className:me.a.sunl_player_placeholder}),u.a.createElement(Be,null)),u.a.createElement("div",{className:me.a.main},u.a.createElement("div",{className:me.a.sunl_board_placeholder}),u.a.createElement("div",{className:me.a.btns},u.a.createElement(pe.a,null))),u.a.createElement("div",{className:me.a.right},u.a.createElement(s.Suspense,{fallback:null},!!o&&!!c&&u.a.createElement(le,{chat:o,liveRoom:c,userId:a}))),u.a.createElement("div",{id:"sunl_player",className:Ke({transition:!0,main_player:!r,small_player:r,inactive:r&&!i}),ref:function(t){e.playerRef=t}}),u.a.createElement("div",{id:"sunl_board",className:Ke({transition:!0,main_player:r,small_player:!r,inactive:!r&&!i}),ref:function(t){e.boardRef=t}}))}}]),t}(s.Component);Qe.propTypes={common:U.a.shape({token:U.a.string,teachUnitId:U.a.number,ctk:U.a.string}),data:U.a.object.isRequired},Qe.defaultProps={common:{token:"",teachUnitId:0,ctk:""}};var Je=Object(m.c)(function(e){return{common:e.common,data:e["live-page"]}})(Qe),Ze=a(11),Xe=a.n(Ze),$e=a(22),et=a.n($e),tt=a(17),at=a(47),nt=a.n(at),rt=Object(s.lazy)(function(){return Promise.all([a.e(1),a.e(2),a.e(13)]).then(a.bind(null,824))}),ct=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=P()(this,(e=k()(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.dispatch({type:tt.a.INIT,payload:{boardRef:a.boardRef,playerRef:a.playerRef,vodChat:a.vodChat}}),window.addEventListener("beforeunload",a.sendStudyRecord)},a.componentWillUnmount=function(){a.props.dispatch({type:tt.a.DISPOSE}),window.removeEventListener("beforeunload",a.sendStudyRecord)},a.sendStudyRecord=function(){a.props.dispatch({type:tt.a.SEND_STUDY_RECORD})},a}return j()(t,e),A()(t,[{key:"render",value:function(){var e,t,a=this,n=this.props.data,r=n.chat,c=n.isPlayerSmall,o=n.isDisPlaySmall;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:nt.a.left},u.a.createElement("div",{className:nt.a.sunl_player_placeholder}),u.a.createElement(Be,null)),u.a.createElement("div",{className:nt.a.main},u.a.createElement("div",{className:nt.a.sunl_board_placeholder}),u.a.createElement("div",{className:nt.a.btns},u.a.createElement(pe.a,null))),u.a.createElement("div",{className:nt.a.right},u.a.createElement(s.Suspense,{fallback:null},!!r&&u.a.createElement(rt,{ref:function(e){a.vodChat=e},chat:r}))),u.a.createElement("div",{id:"sunl_player",className:et()((e={},Xe()(e,nt.a.transition,!0),Xe()(e,nt.a.main_player,!c),Xe()(e,nt.a.small_player,c),Xe()(e,nt.a.inactive,c&&!o),e)),ref:function(e){a.playerRef=e}}),u.a.createElement("div",{id:"sunl_board",className:et()((t={},Xe()(t,nt.a.transition,!0),Xe()(t,nt.a.main_player,c),Xe()(t,nt.a.small_player,!c),Xe()(t,nt.a.inactive,!c&&!o),t)),ref:function(e){a.boardRef=e}}))}}]),t}(s.Component);ct.propTypes={common:U.a.shape({token:U.a.string,teachUnitId:U.a.number}),data:U.a.object},ct.defaultProps={common:{token:"",teachUnitId:0},data:{}};var ot=[{path:"/",component:L,routes:[{path:"/live",component:Je},{path:"/vod",component:Object(m.c)(function(e){return{common:e.common,data:e["vod-page"]}})(ct)},{path:"/wait",component:Object(s.lazy)(function(){return a.e(12).then(a.bind(null,822))})}]},{component:function(){return"404 NOT FOUND"}}],it=(a(600),Object(b.a)()),st=Object(_.a)(),ut=[st];ut.push(Object(f.a)(it));var lt=Object(d.e)(Object(d.c)(i()({},y.default,{router:Object(E.b)(it)})),{},Object(d.d)(d.a.apply(void 0,ut)));st.run(v.default,lt);var pt=document.getElementById("app");p.a.render(u.a.createElement(m.a,{store:lt},u.a.createElement(E.a,{history:it},Object(T.a)(ot))),pt)},602:function(e,t,a){"use strict";a.r(t);a(72);var n=a(12),r=a(3),c=a.n(r),o=a(10),i=a.n(o),s=a(1),u=a(45),l=a(87),p=a.n(l),d=a(6),m=a(24),_=a(17),f=a(19),E=a(15),T=a(14),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sunlands";return{LIVE_AUTH_ENTRY:"https://".concat(e,"live.").concat(t,".com/auth"),VOD_AUTH_ENTRY:"https://".concat(e,"video.").concat(t,".com/auth")}},y={URL:{dev:b("dev-","ministudy"),test:b("test-"),prod:b()}.prod},v=c.a.mark(P),O=c.a.mark(D),S=c.a.mark(k),h=c.a.mark(I),x=y.URL,A=x.LIVE_AUTH_ENTRY,g=x.VOD_AUTH_ENTRY;function P(){var e,t,a,n,r,o,u,l,m,_,f,E;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(s.f)(d.a.SEND_SLOG);case 3:return e=c.sent,t=e.payload,a=t.eid,n=t.opts,r=void 0===n?{}:n,c.next=10,Object(s.e)(function(e){return e});case 10:o=c.sent,u=o.common,l=u.teachUnitId,m=u.liveRoomId,_=u.invitation,f=u.userId,(E=window.slog)&&p()(E.dot)&&E.dot(a,i()({},r,{userid:f||0,teachunitid:l||"",roomid:m||"",invitation:_||""})),c.next=0;break;case 20:case"end":return c.stop()}},v)}function D(){var e,t,a,r,o,l,p,m,_,b,y,v,S,h,x,P,D,k,I,j,N,U,w,C,R,L,M,q,G,F,H,V,W,z;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(s.f)(d.a.AUTH);case 2:return c.next=4,Object(s.e)(function(e){return e.router.location});case 4:return e=c.sent,t=e.pathname,a=void 0===t?"":t,r=e.search,o=void 0===r?"":r,l=Object(E.f)(o),p=l.ctk,m=l.invitation,_=l.encryptStr,b=l.teachUnitId,y=l.channelCode,v=l.debug,S=l.partnerId,h=l.roomId,x=l.userId,P=l.userName,D=l.userRole,k=l.ts,I=l.userAvatar,j=l.sign,c.next=12,Object(s.d)({type:d.a.UPDATE_STATE,payload:{debug:"true"===v}});case 12:if("/wait"!==a){c.next=16;break}return c.next=15,Object(s.d)({type:d.a.UPDATE_STATE,payload:{isKicked:!0,loading:!1}});case 15:return c.abrupt("return");case 16:return N="/live"===a,c.next=19,Object(s.d)({type:d.a.UPDATE_STATE,payload:{ctk:p,isLive:N,invitation:m,encryptStr:_,channelCode:y,teachUnitId:+b}});case 19:if(!b||!_){c.next=40;break}return U={sign:_,teachUnitId:+b},c.prev=21,c.next=24,Object(s.a)(f.a.get,T.a.GET_TOKEN,{params:U});case 24:return w=c.sent,c.next=27,Object(s.d)({type:d.a.UPDATE_STATE,payload:w});case 27:c.next=40;break;case 29:if(c.prev=29,c.t0=c.catch(21),!(c.t0.toString().indexOf("被踢出人员")>-1)){c.next=39;break}return c.next=34,Object(s.d)({type:d.a.UPDATE_STATE,payload:{isKicked:!0}});case 34:return c.next=36,Object(s.d)(Object(u.d)("/wait"));case 36:return c.next=38,Object(s.d)({type:d.a.UPDATE_STATE,payload:{loading:!1}});case 38:return c.abrupt("return");case 39:n.a.error("课程认证失败，".concat(c.t0));case 40:if(!S){c.next=44;break}return c.next=43,Object(s.d)({type:d.a.UPDATE_STATE,payload:{partnerId:+S,roomId:+h,userId:x,userName:P,userRole:+D,ts:+k,userAvatar:I,sign:j,isLive:N,loading:!1}});case 43:return c.abrupt("return");case 44:return c.next=46,Object(s.e)(function(e){return e.common});case 46:if(C=c.sent,R=C.liveToken,L=C.liveRoomId,M=C.imToken,q=a.replace(/\//g,"").toUpperCase(),G="",H={},"LIVE"===q?(G="live",F=A):"VOD"===q&&(G="video",F=g),G){c.next=57;break}return n.a.error("页面参数错误，请检查地址后再来。"),c.abrupt("return");case 57:return V={loginType:G,device:3},m&&p?H=i()({method:3,token:p,invitation:m,channelCode:y},V):R&&L?H=i()({method:2,channelCode:"sunlands_infrastructure_Elive",liveId:+L||0,token:R},V):m&&(H=i()({method:1,invitation:m},V)),W={},c.prev=60,c.next=63,Object(s.a)(f.a,{method:"POST",url:F,data:H,withCredentials:!1,headers:{"Content-Type":"application/json;charset=utf-8"}});case 63:return W=c.sent,z=W.token,c.next=67,Object(s.d)({type:d.a.UPDATE_STATE,payload:{token:z,loading:!1,ctk:p||M}});case 67:c.next=74;break;case 69:return c.prev=69,c.t1=c.catch(60),n.a.error("课程认证失败，错误码".concat(c.t1)),c.next=74,Object(s.d)({type:d.a.UPDATE_STATE,payload:{loading:!1}});case 74:case"end":return c.stop()}},O,null,[[21,29],[60,69]])}function k(){var e,t,a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(s.f)(d.a.SWITCH_WINDOW);case 3:return n.next=5,Object(s.e)(function(e){return e.common});case 5:return e=n.sent,t=e.isLive,a=void 0,a=t?m.a.SWITCH_WINDOW:_.a.SWITCH_WINDOW,n.next=11,Object(s.d)({type:a});case 11:n.next=0;break;case 13:case"end":return n.stop()}},S)}function I(){var e,t,a,n,r,o;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(s.f)(d.a.REPORT_SUNL);case 3:return e=c.sent,t=e.payload,a=t.params,n=t.msgType,c.next=9,Object(s.e)(function(e){return e.common});case 9:return c.next=11,Object(s.e)(function(e){return e["live-page"]});case 11:r=c.sent,(o=r.liveRoom.playerservice)&&o.report(n,a),c.next=0;break;case 16:case"end":return c.stop()}},h)}t.default={auth:D,sendSlog:P,switchWindow:k,reportSunl:I}},69:function(e,t,a){"use strict";t.a={UPDATE_STATE:"question/UPDATE_STATE",UPDATE_SEND_QA_MESSAGE:"question/UPDATE_SEND_QA_MESSAGE"}},7:function(e,t,a){"use strict";t.a={UPDATE_STATE:"quiz/update-state",RECEIVE_QUIZ:"quiz/receive-quiz",FETCH_QUIZ_LIST:"quiz/fetch-quiz-list",SET_CURRENT_QUESTION:"quiz/SET_CURRENT_QUESTION",UPDATE_PAPER_LIST:"quiz/UPDATE_PAPER_LIST",TIPS:{unstart:"暂无随堂考！",uncomplete:"您还有未做随堂考！"},START_BTN_CLICKED:"quiz/start-btn-clicked",CHECK_SCORE:"quiz/CHECK_SCORE",PREV_QUESTION:"quiz/PREV_QUESTION",NEXT_QUESTION:"quiz/NEXT_QUESTION",FETCH_CONTENT:"quiz/FETCH_CONTENT",GO_TO_PAPER:"quiz/GO_TO_PAPER",DO_ANSWER:"quiz/DO_ANSWER",SUBMIT_ANSWER:"quiz/SUBMIT_ANSWER"}},8:function(e,t,a){"use strict";t.a={UPDATE_STATE:"promotes-panel/UPDATE_STATE",HANDLE_PURCHASE:"promotes-panel/HANDLE_PURCHASE",SET_PURCHASE_LIST:"promotes-panel/SET_PURCHASE_LIST",EDIT_PROMOTES_INFO:"promotes-panel/EDIT_PROMOTES_INFO",HANDLE_VOD_PROMOTES:"promotes-panel/HANDLE_VOD_PROMOTES",PROMOTES_TYPE:{GOODS:1,NORMAL_DESPOSIT:2,DEDUCT_DESPOSIT:3,COUPON:4},GET_COUPON_INFO:"promotes-panel/GET_COUPON_INFO",JOIN_COUPON:"promotes-panel/JOIN_COUPON",CREATE_DEPOSIT:"promotes-panel/CREATE_DEPOSIT"}},89:function(e,t,a){e.exports={main:"LivePage__main___3jIMV",left:"LivePage__left___wGwGs",right:"LivePage__right___1-yWK",transition:"LivePage__transition___1PE0Z",sunl_board_placeholder:"LivePage__sunl_board_placeholder___3N8JI",sunl_player_placeholder:"LivePage__sunl_player_placeholder___kA34P",main_player:"LivePage__main_player___3zslR",small_player:"LivePage__small_player___37TJX",chat:"LivePage__chat___2b-2i",inactive:"LivePage__inactive___3SySF",btns:"LivePage__btns___3T-0Z",questions:"LivePage__questions___2m2EN",coming_soon:"LivePage__coming_soon___ylIFw"}}});
//# sourceMappingURL=index.1724ee6015234dd0f8ce.js.map