(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{824:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return w});n(72);var a=n(12),o=n(30),r=n.n(o),s=n(31),i=n.n(s),u=n(32),c=n.n(u),l=n(33),p=n.n(l),d=n(34),h=n.n(d),f=n(0),m=n.n(f),g=n(2),D=n.n(g),_=n(15),S=n(820),v=5e3,j=2,w=function(t){function e(){var t;return r()(this,e),(t=c()(this,p()(e).call(this))).componentDidMount=function(){t.initChat()},t.componentWillUnmount=function(){var e=t.props.chat;e&&e.dispose()},t.getSLEmoji=function(){return t.props.chat?t.props.chat.getSLEmoji():{}},t.initChat=function(){var e=t.props.chat;e.loadAllMessages(function(e){if(0===e.result&&e.message_list&&e.message_list.length>0){var n=e.message_list.reduce(function(t,e){var n=e.message_type,a=e.message_content,o=e.message_id,r=e.user_name,s=e.message_ts,i=e.user_identity,u=e.user_portrait;return n!==j&&t.push({msgData:a,recordId:o,name:r,portrait:u,timestamp:s,userIdentity:i}),t},[]);t.setState({chatData:n})}},function(t){a.a.error("获取聊天历史记录失败！")}),e.loadRoomAnnounce(function(e){0===e.result&&e.announce&&t.setState({announceData:e})},function(t){a.a.error("获取公告失败！")})},t.handleMetaDataUpdate=Object(_.h)(function(e){return t.chatPanel.updateScrollTop(e)},v),t.handleVideoSeeked=function(e){t.chatPanel.updateScrollTop(e,!0)},t.state={chatData:[],announceData:null},t}return h()(e,t),i()(e,[{key:"render",value:function(){var t=this,e=this.state.announceData;return m.a.createElement(S.default,{ref:function(e){t.chatPanel=e},emoji:this.getSLEmoji(),chatData:this.state.chatData,forbiddenStatus:1,readOnly:!0,announceData:e})}}]),e}(f.Component);w.propTypes={chat:D.a.object.isRequired}}}]);
//# sourceMappingURL=13.d569c9f1ca4336561121.js.map